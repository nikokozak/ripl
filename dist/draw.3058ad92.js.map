{"version":3,"sources":["scripts/utils.ts","scripts/settings.ts","scripts/grid.ts","scripts/operators.ts","scripts/ripl.ts","scripts/cursor.ts","scripts/draw.ts"],"names":[],"mappings":";;;;;;ACAA,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAEA,IAAA,QAAA,GAAA,YAAA;AAsBC,WAAA,QAAA,CAAa,MAAb,EAAsC;AAErC,SAAK,MAAL,GAAc,MAAd;AACA,SAAK,cAAL,GAAsB,MAAM,CAAC,UAAP,CAAkB,IAAlB,CAAtB;AI3BF,ACAA,AJAA,AECA,AH2BE,II5BF,ACAA,AJAA,AECA,KH2BO,EC5BP,GGAA,ACAA,AJAA,CECA,ECDA,ACAA,CFCA,GFDA,AD4BE,CC5BF,ED4BsB,GAApB,IC5BF,CGAA,ACAA,AJAA,CGAA,ACAA,AFCA,CAAA,MCDA,ACAA,CDAA,ACAA,AFCA,CAAA,WCDA,ACAA,CDAA,ACAA,CDAA,ACAA,AFCA,CAAA,CAAA;ADDA,AF6BE,AD7BF,IGAA,AHAA,KC6BO,KE7BP,AHAA,GGAA,AHAA,KC6BE,GAAqB,GAArB,IE7BF,AHAA,CGAA,AHAA,OGAA,AHAA,CGAA,AHAA,YGAA,AHAA,CGAA,AHAA,CGAA,AHAA;AKCA,ACAA,AJAA,AEEA,AH2BE,II7BF,AHAA,AEEA,GEFA,CAAA,AFEA,CH2BO,EI7BP,ADEA,GCFA,AHAA,GIAA,AJAA,CIAA,AL6BE,GI7BF,AJ6BmB,CI7BnB,CDEA,AH2BE,QI7BF,CAAA,AHAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;ACAA,ACOC,AHuBC,AD7BF,IGDA,KF8BO,AD7BS,EGDhB,ACOC,CJND,CC6BE,AD7BkB,CGDpB,AHCA,CIMC,CHuBa,AD7BiB,CAA/B,CIMC,CJNuC,CC6BtB,CE9BlB,AF8BmB,CE9BnB,IF8Bc,CAAW,IE9BzB,CAAA,AF8B8B,YAAL,GAAoB,KAAK,SAApC,CAAZ;AI3BF,ACFA,AJCA,AEOE,AHsBA,AD5BA,IKAF,ACFA,AJCA,KEOO,AHsBA,AD5BE,CKAT,ACFA,ANEW,CAAC,EKAZ,ACFA,AL8BE,CD5Ba,CAAL,CC4BI,CC7Bd,CEOE,AJNkB,CAAX,CEDT,AD6BkB,CGtBC,AHsBA,EGtBjB,AJNuB,CIIxB,AJJC,CKAF,ADMuB,CHsBT,CAAW,CK9BzB,CAAA,GJCA,AD6B8B,IK9B9B,CAAA,QAAA,AL8ByB,CK9BzB,CAAA,CL8B8C,KAAK,SAArC,CAAZ;AIrBD,AHIA,ACZD,AF8BE,AD5BD,IGFD,KF8BO,EItBN,AHIA,ACZD,GAAA,GEQC,CAAY,AJsBX,GAAiB,CItBlB,EAAwB,AHIxB,CGJA,AHIY,CCZb,CEQwC,CAAvC,AJsBkB,CAAA,CItBkC,CHIpD,CDkBkB,CClBmB,ADkBf,KAAK,YAAT,EAAuB,KAAK,SAA5B,IAAyC,CAA1D;AItBuB,ACRzB,AJcE,ACPD,ACCC,AHuBA,IK/BF,IDQyB,CAAA,AHMlB,AENA,AHuBA,CK/BP,CHOC,EGPD,CDQyB,CHMvB,GAAc,ACPf,ACCC,AHuBA,CIvBuB,AFDX,CECW,AFDxB,CCCkB,AHuBA,CIvBM,AFDA,CAAxB,ACCC,CFMA,AETD,CDEiC,ACCX,GERvB,AL+BmB,CK/BnB,AL+BmB,GAAA,CAAI,GK/BvB,CAAA,CL+B4B,OK/B5B,CAAA,CAAA,IL+BmB,EAAwB,KAAK,SAA7B,IAA0C,CAA3D;AIvBuB,AHOvB,ACNA,ACAA,AHwBA,ADlCF,MKSyB,CAAA,ALTzB,CAAA,CEgBO,ACNA,AFwBA,CIzBkB,AFCvB,CEDuB,ALTzB,EGUW,CAAT,AHVF,GAAA,CCkCE,GAAiB,EClBjB,GAAsB,ADkBA,MClBM,CAAC,EDkBZ,GAAiB,CAAlC,IClBsB,CAAkB,IAAlB,CAAtB;AGPoC,ACPtC,AJeE,ACNA,AFwBA,IKjCF,KJeO,ACNA,AFwBA,CExBL,EGTF,CHSW,AFwBT,CClBA,ACNA,CGTF,CLiCiB,CClBF,GAAb,CDkBoB,SKjCtB,ALiCiB,CKjCjB,ELiC+B,KKjC/B,CAAA,SLiCE,CKjCF,CAAA,CAAA;AJgBE,ACNA,ACAD,AHwBC,AD/BF,EIOC,IAAA,CAAA,EFMM,ACNA,AFwBA,AD/BS,KEad,ACNA,CHPF,CIOC,AJPsB,CEaR,ACNA,ACAd,AJPD,EAAkC,CGOhC,AHPF,EIOC,AHwBC,AD/ByC,GIO1C,AHwBsB,EClBR,CAAA,KDkBb,EClBa,AENP,CFMS,IENhB,EAAsB,CAAtB,EAAiC,CAAjC,EFMC,AENyC;ACHH,ACLxC,AJeE,ACLA,ACAA,AHuBA,AD9BA,QKEsC,ADKhC,CCLgC,AHUjC,ACLA,AFuBA,AD9BG,CMHV,ANGW,CMHX,ENGc,CKE0B,ADK1B,CFKZ,ECLA,ACAe,CEVjB,AJegB,CGVwB,ACLtC,ALiCA,CI5BsC,AFKtB,CACf,ACDkB,CCLmB,AJ4BpB,CD9BN,CAAA,EMHd,EJegB,CAAA,CDkBd,CD9BY,CIOO,AJPL,CIOK,GFKL,AFZF,CEYI,EFZK,CIOF,AJPZ,CIOgB,GJPK,CAAC,CIOV,CAAJ,CAAe,AJPE,CIOjB,AJPR,CEYP,CELiC,CAAlB,CAAf,AJPuC,CAAC,GAAG,UAAA,CAAA,OAAA,CAAE,IAAF,GAAS,CAA7C,IAAoD,CAAC,GAAG,CAA/D;AKEsC,ACHxC,AJcE,ACLG,ACAH,AHuBA,AD9BD,IMFK,EDGkC,AFMnC,CENmC,AFMlC,EDKC,ACLC,ACAD,AHuBA,CI7BiC,CAAA,GFM3B,CGTI,AHSd,GGTiB,AJclB,AELA,CAAe,AHuBf,EClBiB,CDkBC,CGvBlB,CAAoB,EETM,CAAC,GFS3B,CFKiB,CAAA,OAAA,CAAE,CIdD,CAAwB,ALgC1C,OClBA,MIdkB,CAApB;ADGqD,ACFrD,AJcE,ACLE,ACAF,AHuBA,GG3BD,CELK,EHSF,CAAC,CGTK,CJcH,ACLA,AFuBA,EKhCM,GHSD,CGTK,GJcf,GIde,AJcE,CIdF,KLgCf,EKhCW,CAAS,ALgCM,CClBT,CAAA,OAAA,CAAE,CIdR,CAAb,ELgCE,KClBA;AIbF,AJcE,ACPC,AFyBD,ADnCF,IMGI,CAAC,AHMa,EAGf,AHZH,CAAA,CEiBO,ADkBA,GKhCP,CJcE,CFjBF,EEiBc,CFjBd,MAAA,GEiBc,CAAA,ADkBZ,GAA0B,IClBd,CAAE,IAAd,WDkBA;AI7BA,ACDF,AJaE,ACNG,ACCJ,AHuBC,EGvBD,EERK,EHOD,ACCJ,CDDK,ACCL,CERS,CDCH,AHYA,ACNC,AFwBD,EK/BM,EDCX,AHYA,CCNW,CGPI,AHOd,CENW,AHYA,AELb,CAAA,AHuBC,GI9BA,AJ8BgB,CK/BD,AFQhB,CERgB,EFQhB,EFKa,CAAA,EIbD,EAAb,GJac,ADkBZ,CClBc,CELf,GFKC;AGXA,ACDF,AJaE,ACNE,ACEF,AHsBA,ADhCF,IMCM,EHOF,CAAC,EENE,AFMA,ACEgB,AHsBhB,ADhCS,CMCJ,GAAG,AFSQ,CCRrB,CDQqB,ECRR,ACDI,CFSI,CAAA,AHsBrB,CI9BA,ALFF,CIUuB,AJVK,CCgCR,ADhCpB,CIUuB,CJVgB,CMCpB,AL+BjB,CK/BiB,AFSI,IJVvB,CIU4B,CJVkC,CMC/C,CAAW,IAAX,CAAf,CFSE,EAAqB,EAAA,GAAA,EAAA,CAAA,MAArB,EAAqB,EAAA,EAArB,EAAqC;ACPrC,AFIC,ACGI,AHuBL,ADjCqC,KGIrB,CAAhB,AHJqC,GKGhC,CAAL,ADOS,EJV4B,CKG5B,CAAT,GLHqC,CIUpB,GAAA,CJVoB,CIUpB,AJVoB,CIUpB,CJVoB,CIUpB,CAAZ;ACNL,ACDF,AJaC,ACNC,ACCC,AJXoC,EEgBtC,EFhBsC,EIWpC,GCPI,ACDE,CDCP,ALJqC,GKI5B,ALJ4B,CKIrC,ADOS,CFKV,AELW,CFKX,EFhBsC,CIWpC,EERH,CAAsB,GJarB,CAAA,OAAA,GIbD,AJaC,EIb6D,UJa7D;AGVC,ACDD,AJaC,AENC,AHuBF,ADnC6D,EMK7D,AL8BA,EI7BC,KHYK,CGZC,AJ6BP,CI7BQ,AJ6BR,KK9Bc,CAAC,GL8Bf,CAAA,ECjBC,GIbD,AJauB,CGZtB,ACDwB,CDCA,ACDzB,AL8BA,EK9B4B,CAA5B,AJa4B,ADiB5B,EK9B+B,IDC9B,AHYsB,CAAY,CGZC,ICDL,AL8B/B,CI7ByC,ACDV,IJaR,CAAuB,EIbf,CAAE,CJaV,CAAtB,GGZmC,CAAmB,IAAnB,CAAnC,CCDD,EAA+C,UAAA,CAAA,OAAA,CAAE,aAAjD;ADEC,ACDD,AJaC,ACPD,AFwBC,EExBD,ODOM,ACPN,AFwBM,CExBN,KDOC,ADiBA,CCjBY,ADiBA,GExBb,CAAA,CDOC,ADiBA,GCjBoB,ACPrB,AFwBqB,GExBrB,EDO0B,ADiBA,KCjBzB,KCPD,EFwBC;AChBA,ACNA,ACAA,AHuBA,ADnCA,SEkBK,ACNA,ACAgB,AHuBhB,ADnCE,CAAC,CAAC,EGYA,ACAY,EFMrB,ACNW,ACAU,AHuBrB,ADnCa,CEkBD,ADiBA,EEvBE,ACAO,CDArB,ACAqB,EDAJ,ACAI,AJZF,CEkBnB,ADiBA,CEvBmB,ACAE,CJZC,CEkBD,ADiBA,CEvBC,ACAD,CDAJ,AHZE,GEkBO,ACNA,AFuBA,ADnCE,CIYF,AJZjB,CAAF,GGYwB,CDM/B,AFlBkC,IIYlC,EAAqB,CDAK,AFuB1B,CEvBwC,ACAnB,EJZa,CIYb,AJZa,EIYb,CDArB,ACAqB,EDA2B,EAAE,AHZhB,CAAE,CGYpC,ACAA,EDCA,ACDqB,EAAA,EAArB,EAAqC,AJZ9B,GAAyC,UAAA,CAAA,OAAA,CAAE,SAAlD;AKOO,ACDT,AJaE,ACLC,ACFI,AHwBL,ADnCD,EKMQ,CHOR,CIRG,CAAC,GDCI,CAAA,ACDT,AL8BO,CEtBE,ACFE,GENE,IHQG,CEPP,ADKU,CCLV,CFOU,CCFA,EAAA,AHwBjB,CGxBiB,AHwBG,CEtBE,CCFL,CAAZ,KCLE,CFOU,CAAc,CEPhC,CFOkB,AFsBjB,CEtBC,EFsBkC,KAAK,CI7BnB,OAAtB,EAAqC,GJ6BpC;AI3BA,AFMC,ACFA,AHwBD,SAAK,CEtBE,CENA,EDIC,IAAP,ICJgB,CAAV,AFMY,CFsBnB,CI5BiC,AJ4Bb,CEtBE,KAAK,GFsB3B,GAAgC,EEtBV,CAAc,EAAE,AFsBD,GEtBI,CAAnB,CAArB,KFsBD;AI1BC,ACJH,AJcC,ACJE,ACHA,AHwBD,ADxCF,EEuBC,ICJE,CHnBH,CAAA,CMSS,AL+BF,CI3BE,GAAG,ACJZ,EJcC,CGVc,ACJF,AJcZ,ACJE,CENa,AFMb,CENc,CLbjB,EKaG,CLbH,CCwCE,CErBC,AFqBmB,CCjBrB,ACJI,CDIJ,EDiBC,ECjBD,CDiB4B,ECjB5B,AFvBD,GCwCkC,GErB/B,CAAiB,AFqBlB,KCjBD,ICJE,CAA2B,OAAO,CAAC,CAAnC,EAAsC,OAAO,CAAC,CAA9C;AGRF,AJcC,ACLC,ACHD,AHwBA,EK9BD,CFHA,AH2BA,GEfE,GDKI,IAAI,CIdE,AJcD,CIdE,CHSX,CDKY,ACLZ,CDKD,EAAgB,CAAC,GAAG,ACLnB,CGTW,AHST,CGTS,GJca,IIdb,AJcZ,CIdc,CJciB,CAAC,EAAhC,CCLC,CDMD,ACNkB,MAAjB,CAAwB,CGTd,CAAZ,UHSsC,CAAC,CAArC,EAAwC,YAAY,CAAC,CAArD;AELA,ACHF,AJeE,ACNA,AHhBH,EMOC,IAAI,CAAC,ENPU,EMOf,AJeO,GGZG,CHYC,CAAC,CGZV,EHYa,CAAb,AFtBH,CAA4B,CEsBT,AFtBnB,CEsBoB,CFtBmB,EEsBhB,IFtBvB,CEsB4B,CFtBkC,GEsB3D,EAA+B,CAAC,EAAhC,EACA;AGZC,ACHH,AJgBG,AEXJ,AHwBA,ADrCuC,EMQtC,INRsC,EMQhC,CAAC,AFKR,AHwBA,GDrCuC,CKW9B,ACHR,AJgBQ,AEXT,GCFI,CJ0BJ,ADrCuC,KAAA,CAAA,EAAA,EEwBnC,CAAoB,SAApB,GAAgC,UAAA,CAAA,OAAA,CAAE,QAAlC;AGZC,ACHJ,AJgBG,ACPF,AChCF,AHDA,ADeuC,CIdvC,AHDA,CKwBC,CFvBD,AHDA,CEiCE,AHlBqC,IMShC,CAAC,CDGH,ALZkC,GEyB9B,AFzB8B,CGkBrC,CAAA,EENU,CAAC,ALZ0B,IGkBrC,CAAE,IENC,AHaD,CAAoB,EIhBvB,CAA6B,IAA7B,CJgBG,CAA6B,ACP/B,CAAiB,MDOc,CAAA,ECP/B,GAA6B,MDOE,CAAY,CAAZ,CAA7B,CCP2B,CDQZ,ACRY,ODQZ,ACRY,CDQZ,ACRc,QAA/B,GDQiB,CAAY,CAAZ,CADf,EAEe,UAAA,CAAA,OAAA,CAAE,SAFjB,EAGe,UAAA,CAAA,OAAA,CAAE,SAHjB;AGZC,ACHJ,AJmBG,ACVF,AHnB4D,IGmB5D,SDUO,CCVP,CAAA,OAAA,CAAE,IDUA,CAAoB,SAApB,ACVF,CAAiB,EDUiB,MCVlC,CAA0B,GDUQ,CAAA,GCVR,CAAA,GDUQ,CAAE,OCVV,CAAY,EDUpC,GCVyC,CAAjB,CAA1B,EACa,OAAA,CAAA,WAAA,CAAY,KAAK,CAAjB,CADb,EAEa,UAAA,CAAA,OAAA,CAAE,SAFf,EAGa,UAAA,CAAA,OAAA,CAAE,SAHf;ADWE,ACPF,AFgBF,IEhBE,AFgBI,MAAM,GCTH,ADSM,CEhBb,CAAA,MFgBqB,CEhBrB,AFgBsB,CEhBpB,IDOA,CAAoB,QAApB,ADSW,CCTkB,ACP/B,AFgBqC,C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","file":"draw.3058ad92.js","sourceRoot":"..","sourcesContent":["import s from './settings';\n\nexport function mod(n: number, m: number) : number\n{\n  return ((n % m) + m) % m;\n}\n\nexport function unsafe(x: number, y: number) : boolean\n{\n  return (x > s.cols - 1) || (x < 0) || (y > s.rows - 1) || (y < 0);\n}\n\nexport function grid_x_to_x(x: number, center: boolean = false) : number\n{\n  return (x + (center ? 0.5 : 0)) * s.cell_size + s.h_padding;\n}\n\nexport function grid_y_to_y(y: number, center: boolean = false) : number\n{\n  return (y + (center ? 0.6 : 0)) * s.cell_size + s.v_padding;\n}\n","import { mod } from './utils'\n\nclass Settings\n{\n\tpublic canvas: HTMLCanvasElement;\n\tpublic canvas_context: CanvasRenderingContext2D;\n\tpublic canvas_width: number;\n\tpublic canvas_height: number;\n\tpublic cell_size: number;\n\tpublic cols: number;\n\tpublic rows: number;\n\tpublic h_padding: number;\n\tpublic v_padding: number;\n\n\tpublic font_size: number;\n\tpublic font: string;\n\tpublic text_baseline: CanvasTextBaseline;\n\tpublic text_align: CanvasTextAlign;\n\tpublic font_color: string;\n\tpublic highlight_fg_color: string;\n\tpublic highlight_bg_color: string;\n\tpublic bg_color: string;\n\tpublic base_glyph: string;\n\n\tconstructor (canvas: HTMLCanvasElement)\n\t{\n\t\tthis.canvas = canvas;\n\t\tthis.canvas_context = canvas.getContext('2d');\n\t\tthis.canvas_width = 500;\n\t\tthis.canvas_height = 500;\n\t\tthis.cell_size = 20;\n\t\tthis.cols = Math.floor(this.canvas_width / this.cell_size);\n\t\tthis.rows = Math.floor(this.canvas_height / this.cell_size);\n\t\tthis.h_padding = mod(this.canvas_width, this.cell_size) / 2;\n\t\tthis.v_padding = mod(this.canvas_height, this.cell_size) / 2;\n\n\t\tthis.font_size = this.cell_size - 2;\n\t\tthis.font = `${this.font_size}px sans-serif`;\n\t\tthis.text_baseline = \"middle\";\n\t\tthis.text_align = \"center\";\n\t\tthis.font_color = \"rgb(255, 255, 255)\";\n\t\tthis.highlight_fg_color = \"rgb(0, 0, 0)\";\n\t\tthis.highlight_bg_color = \"rgb(255, 255, 255)\";\n\t\tthis.bg_color = \"rgb(0, 0, 0)\";\n\t\tthis.base_glyph = \"·\";\n\t}\n\n\tinstall () {\n\t\tthis.canvas.width = this.canvas_width;\n\t\tthis.canvas.height = this.canvas_height;\n\t\tthis.canvas_context.textBaseline = this.text_baseline;\n\t\tthis.canvas_context.textAlign = this.text_align;\n\t\tthis.canvas_context.font = this.font;\n\t}\n}\n\nconst canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\nconst settings = new Settings(canvas);\nexport default settings;\n","import { grid_x_to_x, grid_y_to_y } from './utils'\nimport s from './settings'\n\nexport default class ReferenceGrid\n{\n\tpublic width: number;\n\tpublic height: number;\n\tpublic cols: number;\n\tpublic rows: number;\n\tpublic v_padding: number;\n\tpublic h_padding: number;\n\tpublic canvas: HTMLCanvasElement;\n\tpublic canvas_context: CanvasRenderingContext2D;\n\tpublic glyph: string;\n\n\tconstructor(canvas: HTMLCanvasElement)\n\t{\n\t\tthis.canvas = canvas;\n\t\tthis.canvas_context = canvas.getContext('2d');\n\t\tthis.glyph = \"·\";\n\t\tthis.width = s.canvas_width;\n\t\tthis.height = s.canvas_height;\n\t\tthis.v_padding = s.v_padding;\n\t\tthis.h_padding = s.h_padding;\n\t\tthis.cols = s.cols;\n\t\tthis.rows = s.rows;\n\t}\n\n\tinstall()\n\t{\n\t\tthis.canvas_context = this.canvas.getContext('2d');\n\t\tthis.canvas.width = this.width;\n\t\tthis.canvas.height = this.height;\n\t}\n\n\tdraw()\n\t{\n\t\tfor (let x = 0; x < this.cols; x++) \n\t\t{\n\t\t\tfor (let y = 0; y < this.rows; y++)\n\t\t\t{\n\t\t\t\tthis.canvas_context.fillStyle = s.bg_color;\n\t\t\t\tthis.canvas_context.fillRect(grid_x_to_x(x),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t grid_y_to_y(y),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t s.cell_size,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t s.cell_size);\n\t\t\t\tthis.canvas_context.fillStyle = s.font_color;\n\t\t\t\tthis.canvas_context.fillText(this.glyph,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t grid_x_to_x(x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t grid_y_to_y(y, true))\n\t\t\t}\n\t\t}\n\t}\n}\n","import s from './settings';\nimport { grid_x_to_x, grid_y_to_y } from './utils';\n\nexport class NorthOp\n{\n\tpublic x: number;\n\tpublic y: number;\n\tpublic glyph: string;\n\tpublic commands: Array<any>;\n\n\tconstructor (x: number, y: number)\n\t{\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.glyph = 'N';\n\n\t\tthis.commands = [\n\t\t\t{\tx: this.x,\n\t\t\t\ty: this.y },\n\t\t\t{ x: this.x,\n\t\t\t\ty: 0 }\n\t\t];\n\t}\n\n\tdraw ()\n\t{\n\t\tfor (let cI = 0; cI + 1 < this.commands.length; cI ++)\n\t\t{\n\t\t\tconst command = this.commands[cI];\n\t\t\tconst next_command = this.commands[cI + 1];\n\t\t\t\n\t\t\ts.canvas_context.translate(command.x, command.y);\n\t\t\ts.canvas_context.lineTo(next_command.x, next_command.y);\n\t\t}\n\n\t\ts.canvas_context.fillStyle = s.bg_color;\n\t\ts.canvas_context.fillRect(grid_x_to_x(this.x),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size);\n\t\ts.canvas_context.fillStyle = s.font_color;\n\t\ts.canvas_context.fillText(this.glyph,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_x_to_x(this.x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y, true));\n\t}\n}\n\nexport const library = {\n\t\"N\": NorthOp,\n}\n\nexport default library;\n\n","import s from './settings'\nimport lib from './operators'\n\nexport default class Ripl\n{\n\tpublic operators: Array<any>;\n\tpublic modifiers: Array<any>;\n\n\tconstructor ()\n\t{\n\t\tthis.operators = []; // operators hold commands.\n\t\tthis.modifiers = []; // modifiers modify operators.\n\t}\n\n\twrite (glyph: string, x: number, y: number)\n\t{\n\t\tconst new_op = new lib[glyph](x, y);\n\t\tthis.operators.push(new_op);\n\t}\n\n\tdraw ()\n\t{\n\t\tfor (let operator of this.operators) {\n\t\t\toperator.draw();\n\t\t}\n\n\t\tfor (let modifier of this.modifiers) {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n","import s from './settings'\nimport { unsafe, grid_x_to_x, grid_y_to_y } from './utils'\nimport Ripl from './ripl'\n\nexport default class Cursor\n{\n\tpublic glyph: string;\n\tpublic x: number;\n\tpublic y: number;\n\tprivate ripl: Ripl;\n\n\tconstructor(ripl: Ripl, x: number = 0, y: number = 0)\n\t{\n\t\tthis.ripl = ripl;\n\t\tthis.glyph = \"@\";\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\twindow.addEventListener(\"keydown\", this.event_handler(this));\n\t}\n\n\tprivate event_handler(binding: Cursor) \n\t{\n\t\treturn function (e: KeyboardEvent) \n\t\t{\n\t\t\tconst key = e.key;\n\n\t\t\tswitch (key) {\n\t\t\t\tcase 'h': \n\t\t\t\t\tbinding.move_left();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'l':\n\t\t\t\t\tbinding.move_right();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'j':\n\t\t\t\t\tbinding.move_down();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'k':\n\t\t\t\t\tbinding.move_up();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'n':\n\t\t\t\t\tbinding.ripl.write(\"N\", binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmove_up()\n\t{\n\t\tthis.x = this.x;\n\t\tthis.y = unsafe(this.x, this.y - 1) ? this.y : this.y - 1;\n\t}\n\n\tmove_down()\n\t{\n\t\tthis.x = this.x;\n\t\tthis.y = unsafe(this.x, this.y + 1) ? this.y : this.y + 1;\n\t}\n\n\tmove_left()\n\t{\n\t\tthis.x = unsafe(this.x - 1, this.y) ? this.x : this.x - 1;\n\t\tthis.y = this.y;\n\t}\n\n\tmove_right()\n\t{\n\t\tthis.x = unsafe(this.x + 1, this.y) ? this.x : this.x + 1;\n\t\tthis.y = this.y;\n\t}\n\n\tpublic draw()\n\t{\n\t\ts.canvas_context.fillStyle = s.highlight_bg_color;\n\t\ts.canvas_context.fillRect(grid_x_to_x(this.x),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size)\n\t\ts.canvas_context.fillStyle = s.highlight_fg_color;\n\t\ts.canvas_context.fillText(this.glyph,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_x_to_x(this.x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y, true));\n\t}\n}\n","import s from './settings'\nimport './utils'\nimport Grid from './grid'\nimport Ripl from './ripl'\nimport Cursor from './cursor'\n\ns.install();\n\nconst grid_canvas = document.getElementById(\"grid-canvas\") as HTMLCanvasElement;\nconst grid = new Grid(grid_canvas);\ngrid.install();\n\nconst ripl = new Ripl();\nconst cursor = new Cursor(ripl);\n\nfunction clear_canvas(canvas_context: CanvasRenderingContext2D): void\n{\n\tcanvas_context.clearRect(0, 0, s.canvas_width, s.canvas_height);\n}\n\ngrid.draw(); // Draw grid once on background canvas\nfunction draw(): void\n{\n\tclear_canvas(s.canvas_context);\n\tripl.draw();\n\tcursor.draw();\n\twindow.requestAnimationFrame(draw);\n}\n\ndraw();\n"]}