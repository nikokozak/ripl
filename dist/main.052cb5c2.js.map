{"version":3,"sources":["scripts/utils.ts","scripts/settings.ts","scripts/reference-grid.ts","scripts/commander/commands/command.ts","scripts/commander/modifiers/modifier.ts","scripts/commander/modifiers/lines.ts","scripts/commander/accepts.js","scripts/commander/commands/lines.ts","scripts/commander/glyph_mappings.js","scripts/commander/commander.ts","scripts/cursor/events.ts","scripts/cursor/cursor.ts","scripts/ripl.ts","scripts/main.ts"],"names":["Line","StopLine","NorthLine","SouthLine","EastLine","WestLine","MNorthLine","MSouthLine","MWestLine","MEastLine"],"mappings":";;;;;uEUAA;ATAA,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;AKAA,AEAA,AECa,OAAA,CAAA,cAAA,GAAiB;AAC7B,ATAD,IAAA,GSAM,KTAN,GAAA,GSD8B,STC9B;AODA,AEEC,ATqBA,OSrBK,ITqBL,IKlBc,IILe,ATuB7B,GAAA;AKjBAA,AIHA,ATsBC,EKnBDA,IAAI,CIHC,CJGC,CAACC,ALmBD,SSzBuB,GTyB5B,GKnBK,ALmBe,EKnBJC,CLmBhB,eKnBK,EAAsBC,gBAAtB,EAAiCC,eAAjC,EAA2CC,eAA3C;AADQ,AIDd,ATsBC,OStBI,ETsBC,MOpBQ,CENe,MT0B5B,GAAqB,GAArB;AQ3BF,ANAA,AKQC,AJRD,AOAA,ADMC,AGND,AXAA,AUAA,AX4BE,IQ5BF,ANAA,ACAA,AOAA,AEAA,AXAA,AUAA,GJQMH,AEFA,ETsBC,CS3BuB,AGD9B,CXAA,EWAA,CJAA,ANAA,ACAA,AOAA,ATAA,AUAA,GHAA,ANAA,ACAA,AOAA,ACAA,CX4BE,GC5BF,AD4BmB,CC5BnB,CMOe,APqBb,KY5BF,CAAA,EXAA,COAA,ANAA,ACAA,AOAA,ATAA,AUAA,CHAA,ANAA,ACAA,AOAA,ACAA,GCAA,CAAA,GJAA,ANAA,ACAA,AOAA,ACAA,CHAA,ANAA,ACAA,AOAA,ACAA,ICAA,CAAA,CAAA,MDAA,CHAA,AEAA,ACAA,CHAA,AEAA,ACAA,CHAA,AEAA,CRAA,ACAA,CDAA,ACAA,CDAA,ACAA;AISC,AEHU,ATuBT,AD7BF,IAAA,GQSMI,AEHU,ETuBT,CS5BuB,GT4B5B,CD7BF,EC6Bc,CD7Bd,GC6BkB,CAAC,GOtBJ,EPsBD,CAAW,KAAK,AD7B9B,CAAA,OAAA,CAAA,GC6ByB,GAAoB,KAAK,CD7BlD,CAAA,CAAA,MC6Bc,CAAZ;AQ5BF,ANAA,AKSC,AJTD,AOAA,ADKqB,AGJrB,AXDA,AUAA,AX6BE,IQ7BF,ANAA,ACAA,AOAA,AECM,AXDN,AUAA,GJSMH,AEJoB,CGJhB,CZ4BH,CS7BuB,CPA9B,ACAA,AOAA,AECa,EZ4BX,CE7BF,ACAA,AOAA,ATAA,CWCiB,CZ4BH,CC7Bd,GOAA,AGAA,AX6BkB,CE7BlB,ACAA,AOAA,AECiB,AZ4BE,CE7BnB,ACAA,AOAA,AECiB,CJDjB,ADMe,AINf,GX6Bc,CAAW,EY5BZ,EAAb,CFDA,ATAA,AD6B8B,CU7B9B,ATAA,ECAA,ACAA,CDAA,ACAA,EKAA,AGAA,CHAA,AGAA,CVAA,CAAA,ID6ByB,CQ7BzB,AGAA,CHAA,AGAA,CX6B8C,KC7B9C,AD6BmD,CC7BnD,CAAA,OD6Bc,CAAZ,EQ7BF,AGAA,CHAA,AGAA,CHAA,AGAA;AJUC,AEL8B,ATyB7B,AD7BF,OQSMI,AEL8B,ETyB7B,AD7BS,CUDc,EVC9B,CAAoB,CAApB,EAA+B,CAA/B,CC6BE,CD7BsC,EC6BrB,GOxBJ,IPwBI,CAAA,GAAA,CAAI,KAAK,YAAT,EAAuB,KAAK,SAA5B,IAAyC,CAA1D;AQ7BF,ANEA,AKQC,AJTD,AODA,ADKC,AGHD,AXDA,AUDA,AX8BE,AD5BA,ISFF,ANEA,ACDA,AODA,ATCA,AUDA,GJUMF,AELA,EGHG,AZ4BF,AD5BE,CUHqB,AVGnB,CGAX,AHAY,CIDZ,AODA,CFAA,AIEA,CVAA,AHAe,CIDf,AODA,ACAA,AZEU,CSFV,AIEa,CXDb,CUDA,AX8BE,AD5BkB,CAAX,CEDT,CD6BmB,COzBJ,CRHU,CAAvB,EGAF,CCDA,CH6BmB,CAAA,CU9BnB,CFAA,AEAA,CFAA,APCA,AD6BmB,CW9BnB,AX8BuB,CW9BvB,IDAA,AV8B4B,CQ9B5B,AEAA,CFAA,CGAA,CAAA,ODAA,CAAA,CAAA,AV8BmB,EAAwB,KAAK,EQ9BhD,CAAA,CAAA,GGAA,CAAA,CAAA,AX8BmB,IAA0C,CAA3D;AExBD,AKKA,AJPA,AMCU,AGDV,AXSA,ADmBC,AD7BD,EaCA,IAAI,CLOCG,AENU,AGDV,EZ4BC,CSjCuB,CPO7B,ACFA,ASAA,AXSA,OCPA,AF0BC,CE1BY,ACFb,CAAa,CH4BK,EO3BJ,CLCd,ADOA,CETA,AFSY,CCPgB,AF0BL,CE1BvB,ACF4B,CAA5B,CDEuC,CAAvC,ACFuC,CAAvC,AFSA,CCPgD,CCFA,AFSX,EDmBnB,GAAiB,CAAlC;AQ/BF,ANOE,AKID,AJNC,AOLF,ADIqB,AGApB,AXUC,AUdF,AXgCE,EY5BD,EJJD,AEAA,ACAA,GJWMJ,AEPoB,CGAnB,CVGA,ACFA,ASDC,AXUD,ADkBA,CEzBL,ACFA,AMP4B,ECE9B,ACAA,CTOW,ACFA,AH2BT,CQhCF,ANOE,ACFA,COLF,ATcE,AUdF,CXgCiB,CQhCjB,CPcgB,GDkBM,CO5BP,AGJf,CAAA,CTcE,MWVD,ADJD,AXgCiB,CY5Ba,ADJ9B,CHAA,CAAA,AEAA,AVgC+B,CUhC/B,CEIC,GDJD,CAAA,CHAA,CAAA,ORgCE,QWhCF,CAAA,CAAA,KHAA,CAAA,CAAA,EAEA;ANKc,AKKb,AJPa,AMDiB,AGC9B,AXUC,ADkBA,ADlCF,OQaMK,AER8B,AVLpC,CAAA,CGQmB,ACFA,AFUZ,ADkBA,CE1BO,ACFA,AMPgB,CVC9B,EGQuB,ACFA,CDET,ACFA,AJNd,GAAA,KCkCE,CO7Ba,ANWb,EDkBqB,CClBC,MAAM,CAAC,ADkB7B,UClBsB,CAAkB,IAAlB,CAAtB;ACRwB,AKMzB,AJRyB,AOH1B,ADGC,ARWC,AUdF,AXgCE,IUhCF,ACAM,GJWAR,ELNyB,ACFA,AFWxB,ADkBA,CUhCP,GAAA,CRK0B,ACFA,AFWxB,CQXY,AEHG,ETKsB,ACFA,AFWxB,CUdK,CXgClB,CClBA,ECTwB,ACFA,AH6BN,GUhCpB,CDJ8B,AEIF,CAAC,GXgC3B,WWhCkB,CAAwB,aAAxB,CAApB;AHCA,ANKE,AKJa,AJEb,AOKD,ADLA,AGCD,AXUE,AUdF,AXgCE,AD/BF,ISDA,AIII,ADJE,GFGA,ERWC,ADkBA,AD/BS,EWOf,EFRD,CPcE,CFbF,CSDA,ATCuB,CWOtB,ATMc,AFbf,CWOa,CVwBX,AD/BgC,CYDZ,AZCtB,EC+BoB,AD/BuB,CYDlB,CDQxB,EAAuC,CAAvC,ATMc,COdf,APce,CSNwC,CAAtD,CCRgC,CDQmC,ACRlC,GVcnB,CAAE,MDkBf,IWhCuB,CAAwB,CVc/C,iBUduB,CAAzB;AHOC,AECuC,ADbV,ARoB5B,AUdF,AXgCE,AD9BA,CURW,GEMP,IDOkC,CAAA,ATOjC,ADkBA,AD9BG,CAAC,CSIV,ETJa,CWK0B,CTOtC,EUdiB,CVcH,CSPwB,CFDvC,AECuC,ACPlB,CHMR,CEC0B,CXL1B,CAAA,GSIb,AR0BC,CClBc,AUdc,CHMS,APQvB,AUde,CXgCH,CD9Bd,CAAE,IEYA,AFZF,CEYI,EFZK,CAAd,GYFa,CAAwB,AXgC5C,AD9B4B,CAAC,GAAG,CAAzB,CEYP,GFZuC,CAAC,GAAG,EYFvB,CAAtB,OZE6C,CAAA,OAAA,CAAE,IAAF,GAAS,CAA7C,IAAoD,CAAC,GAAG,CAA/D;ASMA,ANFD,ACFA,AOGuC,ADD3B,ARSX,ADkBA,AD9BD,EGGA,ACFA,IOGuC,CAAA,ADD3B,CAAA,CDEN,ANFN,ADSM,ADkBA,CE3BN,ACFA,AOGuC,CPHvC,AOGuC,GDD3B,CDEX,ECFoB,CDEN,APOd,CCTD,CAAA,ACFA,CAAA,AFWkB,EQTS,CDE1B,ACF2B,CNF5B,EH6BC,CG7BD,EDEA,AF2B2B,CS3BN,ARSH,CQTkB,ARSlB,CCTlB,KCFM,CME8B,ARSlB,CQTkB,ARShB,GCTR,MDSX,CDkBA,EG7BD,EAA8C,AMEzB,EAA+B,CPApD,EAAoD,GOA/B,CACrB,UAAC,KAAD,EAAQ,EAAR,EAAqB,EAArB,EAAyB,EAAzB,EAA2B;ADE1B,ANDA,ACFA,AOCmD,ATSnD,AUdF,AXgCE,IE1BA,ACFA,AQJF,EFKU,EELV,CHOO,APOA,ADkBA,CS3BO,CELd,EFKc,EAAA,CAAA,CAAA,AT2BZ,CE1Bc,ACFA,AFUd,CCRe,ACFA,CH4BC,CClBC,EOPjB,AGPF,GHOwB,ENDtB,ACFA,GDE2B,ACFA,AFUV,COPW,APOX,COPY,CRyB7B,KClBiB,CAAE,CCRQ,ACFA,CDEA,ACFA,CKGL,CAAkB,IAAlB,CAAtB,AND2B,ACFA,AFU3B,CCR6B,ACFA,QDE7B,ACFA;AKIA,ANDA,ACFA,AFUA,AUVD,AX4BC,ADnCF,IGSE,ACFA,EMAc,CVPhB,CAAA,CSUO,ACHY,ARUZ,ADkBA,EW5BN,CFAkB,CRUjB,CQViB,AVPnB,CUOmB,AEAlB,CFAkB,ARUL,COPZ,ATVF,CGSgB,ACFA,AQAf,CTEgB,ACFA,AH4Bf,CQzBgB,ERyBE,CDnCpB,ESUuB,ARyBrB,CQzB+B,APOnB,CCRZ,ACFA,AFUY,CCRY,ACFA,MFUZ,CCRY,ACFA,AFUV,COPiB,ANDP,ACFA,CKGO,EPO/B,KOP+B,CAAE,ENDT,ACFA,CDEY,ACFA,CKGL,GAAS,CNDC,ACFA,CDEjB,ACFA,CDExB,ACFA,EDGa,ACFA,KKE2B,CAAA,CNA3B,ACFA,CDEA,ACFA,KKE2B,CAAE,IAArB,CAArB,ANAa,ACFA,CDEY,ACFA,KDEK,ACFA,CDEjB,ACFA,CDCb,ACFA,EDIa,ACFA,UDEA,ACFA,CDEA,ACFA,ODEA,ACFA,CDEE,ACFA,SDAf,ACFA,EDKa,ACFA,UDEA,ACFA,CDEA,ACFA,ODEA,ACFA,CDEE,ACFA,SDDf,ACFA;AKIA,ANEA,ACFA,AOJqD,ADCrD,ARUA,AUXD,AX8BC,ES7BA,EPKA,ACFA,GMHK,CCDgD,ADC/C,AEDP,CHIM,AEJgD,ATWhD,ADmBA,GS7BL,CAAW,ARUX,AUXD,CDAsD,EDCrD,ARUY,AUXb,EHIC,ANEc,ACFA,CDEC,ACFA,AOJsC,AV8BrD,CU9BqD,ACAtD,CHIkB,CEJoC,AV8BnC,CAAlB,GQ1BsB,APOV,COPqB,APOrB,CCLZ,ACFA,GDE2B,ACFA,GFOf,CAAE,EOPmB,CAAA,CPOjC,ECL2B,ACFA,CDEA,ACFA,GKAM,CAAE,GNER,ACFA,CKAM,ANEJ,ACFA,GKAa,ONE1C,ACFA,GKA0C,CAAA,OAAA,CAAE,IAAtB,CAAtB;AACA,ANEA,ACFA,AOLqD,ADErD,ARUA,ADmBA,ADjCF,IGSE,ACFA,EOLqD,CAAA,EDE9C,AVJO,CWEuC,CAAA,GDErD,IPKc,ACFA,CDEC,ACFA,CJPjB,CAA4B,CAA5B,EAAuC,GGSrC,ACFA,CDEwB,ACFA,EJP1B,EAA8D,CGS/B,ACFA,KDE7B,ACFA,EDGa,ACFA,ODEA,ACFA,CDEA,ACFA,WDEA,ACFA,CDEY,ACFA,KDEK,ACFA,CDEjB,ACFA,EDEoB,ACFA,IDEpB,ACFA,CDCb,ACFA,EDIa,ACFA,ODEA,ACFA,CDEA,ACFA,WDEA,ACFA,CDEY,ACFA,KDEK,ACFA,CDEjB,ACFA,EDEoB,ACFA,IDEpB,ACFA,CDAb,ACFA;ADKA,ACFA,AORkE,ADGlE,AEDA,AZJqC,CUCjB,EPArB,ACFA,AMMG,CEDF,CFHoB,CAAT,AVD0B,MAAA,EYIrC,CAAA,EZJqC,KYIrC,AZJqC,CYI5B,AZJ4B,EAAA,KYIrC,CAAiB,CAAC,WAAD,EAAc,gBAAd,EAAgC,aAAhC,CAAjB;AHKD,APOA,AUVC,AX6BD,ADnCsC,ESStC,APOA,ADmBA,EDnCsC,KYMhC,CX6BN,ADnCsC,CSStC,AR0BA,CQ1BA,CGHC,AZNqC,EEgBtC,CAAA,AUVa,EZNyB,EYMrB,AX6BjB,CQ1BA,AR0BA,CQ1BA,GPOA,CAAA,COPA,CR0BA,EQ1BA,APOA,CDmBA,ECnBA,GUViB,CAAA,GHGV,CR0BE,GW7BI,CHGb,APOA,AUVyB,EHGH,CAAtB,CR0BA,CQ1BiC,CAAjC,AR0B2C,EQ1BD,GGH7B,CAAZ;AHKA,ANGD,ACFA,AORC,ADGK,ARWL,AUXA,AX6BA,ADpC4D,EGc7D,ACFA,EMLY,IDIL,CNGP,AQVM,ATcA,AUXA,AX6Bc,CEtBpB,ACFA,CAAA,EHwBoB,CS7BE,CCHrB,AVgCmB,ES7BK,CDIR,AEPF,ACGd,AX6BmB,CEtBpB,AFsBoB,CEtBpB,ACFA,CKDoB,ALCpB,AQLkB,AX6BE,EClBnB,CCJD,AQVC,ATcoB,COPG,AGJF,CFAV,CPOZ,ACFA,GAAA,CHwBoB,EClBnB,CAA8B,ADkBX,CClBnB,CQXwB,AEAH,CTOhB,AOPoB,ARWQ,AUXZ,CVWrB,CQXwB,CNKjB,AFM6B,COPb,ACJc,CDId,ARyBvB,CS7BwB,CEAP,AX6BE,CS7B4B,ARWN,AUXV,CFAuB,AT6BnC,CS7Bd,CNKN,CKDwB,ARyBJ,CQzBmB,ALCT,AFM7B,CCJD,CDIiD,CCJH,EMHtB,CAAJ,CAA0B,APOQ,COPlC,CRyBA,CQzB6B,ARyB7B,CQzBA,AGJF,CHIjB,AGJA,CVWA,GDkBA,EGxBD,AHwBoB,EGxBoC,AHwBpC,EAAnB,EACC;AErBD,ACFA,AOTA,ACGA,AX4BK,SEpBA,AQXA,ACGA,CX4BI,CGtBF,IQNP,CX4Be,EW5BD,CTQd,ACFA,AHsBe,CEpBC,ESRE,CDHlB,GAAsB,GV+BP,CW5BG,AX4BH,CW5BG,CDHU,AV+Bb,CU/Bc,AV+BxB,CEpBL,ISRc,CAAW,IDHH,CAAkB,IAAlB,CAAtB,GCGc,CAAd,CAND,CAQC;AHGA,ANIA,ACFA,AOTA,ADCW,ARYX,ADmBE,ADpCF,GGYD,ACFA,IMLY,CDMP,ACNO,CCDN,ATaA,AFjBE,CCoCC,ADpCA,CAAC,EEiBA,CSbT,ATaU,CFjBG,EWIA,ATaA,CONC,ACNH,ARYX,ESbA,ATagB,CQZK,ARYJ,AFjBE,GEiBC,ADmBE,ADpCA,GCoCG,ADpCN,EEiBM,CONC,ATXE,CUKjB,AVLF,CAAF,CUOT,ARUE,ADmB+B,CAAC,CCnBD,CAAC,AFjBE,EEiBlC,EON0B,APO1B,COP0B,GRyBD,CAAkB,CDpCT,CAAA,CSWlC,CRyByB,CQxBxB,ARwBC,IDpCgC,CAAE,SAA7B,GAAyC,UAAA,CAAA,OAAA,CAAE,SAAlD;ASaE,AERF,ATcC,AUVD,AX4BE,ADpCH,MCoCG,GUhCG,ACIA,CDJL,CFQO,APMD,CDkBE,CUhCC,AVgCA,CUhCT,CTcU,AUVV,CVUW,AUVC,EAAZ,AX4BE,CClBY,AUVC,CHIb,APMD,CONgB,ARwBA,CClBA,AUVjB,CVUkB,CUVE,EHIE,APMD,ADkBC,KClBI,GONT,AGJI,CHIU,APM9B,AUVmB,CHIH,CPMe,AUVA,CHIE,APMD,AUVb,AX4BlB,CQxBe,CAAf,APMD,AUVwC,EVWxC,EOPuC,UAAtC;AACA,ANGH,ACHD,AORE,ADEF,ARaI,AUZ4C,AX6B5C,EErBH,IFqBG,CS9BJ,CAAA,CPSC,ACHD,AORO,CRWN,AQXC,CFQO,CRwBC,CUhCC,ATeF,AUZuC,AX6BrC,CUhCT,CDEF,ENMA,CMNe,AECqC,CHKhD,ANGH,ASRoD,AX6BjD,CQxBc,ANGjB,EFqBmB,EErBnB,CMHsB,ACNR,CAAA,CPSd,ADIG,ADiBqB,CCjBD,AUZwB,CAAe,GFDhD,CDMG,ACNI,CDMU,AGLgB,CHK9B,AGLmD,EHKlC,ANG5B,ADIH,COPc,AGL8B,CHK5C,ACNW,CACd,ARYmC,AUZsC,AX6BtE,CW7B4C,EHKP,AGLoC,CAA7B,CAAA,ETQ/C,EAAiC,CORhC,ARYkC,CAAA,COPhC,GCLH,EAAa,CRYsB,CAAE,EQZrC,EAAyB,IRYtB;AONA,ANIF,AC9BF,AOmBE,ADEA,ARYE,AUb2E,AX8B3E,ADzCJ,CITA,CMqBE,CNrBF,EKsBE,AGFA,CX8BE,CS7BG,AVZP,CUYQ,AVZR,CWUO,EFQA,ANGE,COTF,CAAL,ARYO,EONE,ANGT,AQXA,CDEc,ECFA,CXVhB,CCyCkB,CAAC,CDzCnB,CUYgB,CAAA,CDMK,CERL,CAAA,ATcZ,CAAoB,KDiBpB,ADzCJ,CWUE,ADEA,ERYE,ADiB8B,CQvBD,APMA,IDiBM,GCjBN,CAAA,CONA,CAAA,OAA1B,ARuBH,EQtBD,APK8B,CAAY,CAAZ,CAA7B,EACe,OAAA,CAAA,WAAA,CAAY,CAAZ,CADf,EAEe,UAAA,CAAA,OAAA,CAAE,SAFjB,EAGe,UAAA,CAAA,OAAA,CAAE,SAHjB;AOJA,ANEF,AQVA,ADCA,AReE,AUhBF,AX8BE,GEvBH,CQPC,EV8BE,GS7BK,AEDF,CDAC,CFQC,AERA,ETgBA,CQfP,CEDA,CAAY,EAAZ,CHQE,AGRa,CHQC,ARsBA,CAAC,CW9BjB,EAAoB,CHQC,EERrB,ATgBE,CShBsB,ATgBF,EDcpB,GQtBc,ARsBa,CQtBC,AGRT,CHQL,AGRI,EHQa,AERjC,ATgBE,AUhB8B,CHQhB,AGRI,AX8Bc,CQtBhC,AERiC,CTgBD,AUhBO,GHQF,CERC,IV8BtC,ECdgC,CAAA,EORhC,IERiC,CAAmB,ATgBpB,CAAE,GShBD,CAAnC,MTgBE;AOPA,AERF,ADCA,AReE,AUjB4C,AX+B5C,ADtCJ,CUKe,EAIX,EAJW,CAAf,ATiCI,GDtCY,ESgBP,EPQA,AUjBuC,KAAI,CAAC,CHSjD,ARsBc,ADtClB,CSgBmB,ARsBA,ADtCS,CAA5B,EAAuC,CCsCnC,CQtBoB,CPQpB,CAAoB,AUjBwB,AX+BtB,CW/BqC,CZP/D,EAA8D,CCsC/B,CQtBZ,AGT6B,CHSf,AGToC,CHSlD,APQf,CAA6B,ADc7B,CQtBgC,AGTY,CHS7B,CAAf,AGTsE,CAA1B,CViBV,CUjBuC,CHSnC,AGTM,CAAA,EViB5C,EACe,IOTf,GPSe,CAAA,WAAA,CAAY,CAAZ,EAAe,IAAf,CADf,EAEe,OAAA,CAAA,WAAA,CAAY,CAAZ,EAAe,IAAf,CAFf;AOPA,ANEH,ADQG,AUpB2E,AXgC3E,ADvCmC,EGmBtC,GSZC,CZPqC,GGmBtC,CAAA,EHnBsC,KAAA,EGmBtC,CAAA,EHnBsC,CAAA,EAAA,EGmBtC,GAAA,UAAS,UAAT,EAAoC;AAEnC,AQXD,ATkBE,AUpBD,AXgCA,ADxCqC,EWUtC,CVoBA,CD9BsC,IWUtC,CAAA,ACFM,CZRgC,CGqB9B,EHrB8B,EGqBrC,ASbA,CAAY,EDEb,ACFC,AZRqC,CWUtC,ACFgB,EDEhB,CCFC,EDED,ACFqB,UDElB,ACFmB,CAAD,EAAY,CAAZ,CDErB,CCF0C,CDExB,SAAlB,EAA4D;AFS3D,ANGA,AQVA,ATiBA,AUrB8C,AZRc,GGmB7D,ADRA,KSCK,CFOC,IEPI,ACJqC,GHW9C,CEPa,CCJqC,CAAC,GDIjC,MAAlB,ACJ8C,CAAe,CDK5D,ICL6C,CAAqB,GAArB,EAA0B,CAA1B,EAA6B,CAA7B,CAAA;AHY9C,AFrCF,AFAA,AM+BI,ACN2E,AXiC/E,GQrCC,CFrBD,AFAA,COyBE,IXiCF,EU3BS,EJ/BT,CFAA,EEAA,CFAA,AM+BI,AV2BJ,CU3BgB,KAAZ,IAAqB,IJ/BzB,CAAA,AFAA,CAAA,GM+BI,GJ/BJ,CAAA,AFAA,CAAA,UEAA,CAAA,CAAA,AFAA,CAAA,CAAA;AFyCA,AQTI,ATeJ,AUrBE,AXxBF,ADiBE,CCjBF,EAAA,EU2BE,IRYF,ADMA,AUrBO,AZPE,CAAC,CWaA,AXbC,IYOT,AZPa,CGsBf,ASfc,EAAZ,CAAe,EZPI,CE4BrB,AUrBE,EAAoB,AZPE,GAAH,GAAS,CAAnB,CAAF,EYOc,CAAD,CZPc,CYOF,CAAZ,EAAqB,MZPP,CAAA,OAAA,CAAE,SAA7B,GAAyC,UAAA,CAAA,OAAA,CAAE,SAAlD;ASoBD,ANnCD,AIHA,AFAA,AMgCI,AT9BJ,AUuBgD,AZN/C,CGhBD,ADDA,COoCC,CNnCD,ADDA,CKFA,AFAA,OIsCC,CAAA,AENS,CJhCV,AKyBgD,CPzBhD,EEAA,AIgCc,CNhCd,COyBoD,CAAC,EHapD,CAAA,GENS,CAAc,CFMvB,CGb+C,CAAe,CHa9D,CFtCD,CAAA,AFAA,CAAA,COyBgD,CAAqB,EDOpC,CCPe,CLzBhD,CEsCQ,AFtCR,AFAA,AOyB0E,CHazE,AJtCD,AOyBgD,CDOxB,CFML,AGb0D,CHa5E,AGb+C,CDOV,ACPU,CHapB,MFtC5B,CAAA,CAAA,GFAA,CAAA,CAAA,EAEA,WM8BU,CAAN;AFQF,AEPE,ACR2E,AXkC/E,IAAM,CWlCJ,IHeK,GRmBO,GAAG,EQnBf,CAAc,CRmBK,IQnBA,IRmBJ,EAAjB,EQnBgB,CAAc,CAAd,EAAiB,CAAjB,CAAd,IAAqC,SAArC;AACA,AFvCF,AIgCE,ACRA,AXkCF,AD5CA,GWUC,CJxBD,GN0DA,AD5CA,CC4CA,AD5CA,CSyBO,AGfA,ELxBP,GAAA,CKwBE,AXkCF,CWlCc,EHeZ,AGfA,AXkCa,CQnBE,AGfA,AZVjB,EOdA,CAAA,AKwBE,AZVF,ESyBsB,AGfA,EXkCtB,MQnBiB,CAAc,ATzB/B,CSyBiB,AGfM,CLxBvB,AKwBsB,CHeY,AFvClC,CEuCiB,AGfiB,CHehC,AGfoB,EAAqB,EHeH,SAAtC;AACA,AJvCF,AOuBgD,GHY/C,CJnCD,QAAA,COuBgD,EPvBhD,GOuBoD,CAAC,MPvBrD,GOuBgD,CAAe,EPvB/D,EAAA,COuBgD,CAAqB,GAArB,EAA0B,CAA1B,EAA6B,CAA7B,CAAA;ALvBhD,AFA8B,AMiCrB,ACVsE,AZL/E,EKlB8B,AMiCrB,EJjCT,CKuBE,GDUO,CAAA,AXfO,EKlBc,CAAA,EEA9B,APkBA,CAAsB,EOlBtB,CIiCS,CAAA,CNjCqB,ALkB9B,EKlB8B,ALkBO,GAArC,EAAgD,CKlBlB,CAAA,GEA9B,AIiCS,CJjCT,EIiCC,KJjCD,CAAA,IIiCuB,MAAtB,EAAoC,IJjCrC,CAAA,CAAA;AEyCC,AENC,ACXA,AZJA,ESqBD,ITrBO,GYID,EHiBN,AENQ,CFMR,ATrBa,GYIZ,AZJe,CYIH,EAAZ,CAAe,CZJK,CSqBrB,AENkB,AXfI,CSqBtB,AENQ,ACXP,EDWiC,ACXb,CZJK,CSqB1B,ATrB2B,GSqB3B,ATrBsB,CAAS,GAAG,CYIZ,CAAD,CZJgB,CYIJ,CAAZ,EAAqB,CHiB1C,ATrBsB,CAAD,CAApB;ASuBA,AFzCF,AFAC,AMmCE,ACb6C,AZH9C,IOnBF,EPmBM,EOnBN,CEyCO,CENE,CJnCT,AFAC,EMmCW,ACboC,GDajC,CAAC,CAAC,ACbmC,AZHlC,CKnBjB,AOsBoD,CPtBvC,CEAd,AFAC,AMmCE,AXhBkB,CAAnB,CSsBA,AJzCuB,CIyCH,AJzCrB,EAAiC,CEAlC,CKsBgD,CLtBhD,AKsB+D,IHmB7D,CAA8B,AGnBgB,CHmB9C,AGnBmE,EHmBlC,CAAjC,AGnB8C,EHmBV,AGnBoC,CAA1B,EAA6B,CAA7B,CAAA,KHmBV,CAAA,OAAA,CAAE,YAAtC,EAAoD,UAAA,CAAA,OAAA,CAAE,aAAtD;AFzCgC,AKsB6C,AZF7E,EOpBgC,GKsBhC,CZFI,KOpB4B,AFEhC,ALkBS,COpBuB,GPoBnB,COpBmB,CFEhC,CEFgC,AFEhC,ALkBA,EAAkB,EKlBlB,CAAA,CEFgC,CAAA,EFEhC,ALkByB,CAAC,CKlBpB,GAAN,CLkByB,CKlBd,ALkBO,CKlBlB,EAAc,CAAd,KAAgB;AIwChB,AJvCA,AMkCC,ACdD,SHmBoB,AGnBf,IHmBe,CELX,CFKW,AGnBpB,CAAY,CDcX,CFKmB,AGnBpB,CHmBoB,AGnBL,EHmBK,CGnBpB,CHmBoB,CGnBA,EHmBA,KAAK,GGnBJ,CAAD,EAAY,CAAZ,CHmBpB,CGnByC,CHmBrB,EAAA,GAAA,EAAA,CAAA,MAApB,EAAoB,EAAA,EAApB,EACC;AADI,AFnCN,AI+BG,ACf4C,AZF9C,SAAO,CSqBE,CFnCV,EI+BQ,ACfuC,CZFlC,COdb,CAAa,AI+BV,CFIc,CGnBkC,AZFlC,CYEmC,CHmBnC,CFnCjB,APcC,CSqBgB,CAAA,AFnCW,APezB,COfH,CEmCiB,CAAX,AFnCiC,CAAvC,CKgB+C,CLhBC,AKgBc,KAAf,CAAqB,GAArB,EAA0B,CAA1B,EAA6B,CAA7B,CAAA;AHqB5C,AFrCH,AFFA,AMkCI,AChB0E,AZAzE,EKlBL,ELkBK,CYAJ,GLhBD,EEqCO,AJvCP,AMkCI,AXhBO,CKlBX,ALkBY,EOhBZ,GAEC,AI8BS,CFKP,AELQ,EFKK,CJvChB,CAAA,CEIC,CAAA,APcuB,EAAb,CSqBY,AELnB,AXhBC,CSqBmB,AFnCvB,AFJD,CEIC,CPc6B,CKlB9B,CIuCgB,CAAa,AFnC5B,EAAM,APc4B,GSqBD,ATrBI,EOdrC,CFJO,ALkBsB,COdhB,CAAb,CPc2C,COd3B,CAAhB,GFJD,ALkBiD,EOd9B,AFJW,ALkBA,CSqBd,ETrBsC,COhBtD,IPgB2D,EAAtD,OKlBL,EAAuD;AIwCpD,AJtCF,AMiCG,AChBH,AZAG,QKjBG,COiBD,CDgBF,KChBH,CDgBS,AChBG,CDgBF,CChBV,CAAe,CPjBG,EOiBlB,CPjBqB,AMiClB,CAAc,AChBG,OPjBS,CAAC,AMiCb,CAAA,CChBI,CAAD,EPjBC,AOiBW,CPjBI,AOiBhB,CPjBC,COiBoB,CPjBF,MMiCtB,CAAe,GAAf,CAAd,EAAmC,INjCkB,EMiCZ,CNjCe,AMiCd,CNjCxB,AMiClB,CNjCH,CMiCgD,MAAM,CAAC,CAApD;AJ9BH,AFFA,AMiCG,ACjB2C,ILd9C,AFFA,KEEI,CAAC,GKcyC,GPhBlC,CAAC,CEEb,AKckD,CAAC,ELdnC,AFFhB,CAAkB,CEElB,KKc8C,CAAe,KAAf,CAAqB,GAArB,EAA0B,CAA1B,EAA6B,CAA7B,CAAA;AHsB9C,AFnCA,AFHmB,AOgB0D,AZC7E,IOdA,CKaA,CPhBmB,CAAC,EIsCC,AFnCjB,AFHkB,ALiBf,COdF,GEmCgB,CJtCM,CIsCN,AJtCH,ALiBlB,GSqBqB,CAAA,AFnCrB,EEmCqB,CFnCJ,CEmCI,CFnCrB,CAJ+C,CEuC1B,AFnCA,KEmCK,SAA1B,EAAqB,EAAA,GAAA,EAAA,CAAA,MAArB,EAAqB,EAAA,EAArB,EACC;AADI,AJtCyB,AMkC5B,ACjBF,AZCD,MKlB+B,CAAC,EAAE,AOiB5B,CHqBI,GEJF,CNlC+B,COiBtC,CDiBE,ACjBU,EHqBK,AGrBjB,CAAe,EHqBE,EAAA,CAAA,EAAA,CAAZ,GGrBL,EAA4B,UAAC,CAAD,EAAY,CAAZ,EAAqB;AHuB/C,AFpCF,AFJkB,AMmCf,ACjBF,ILdD,CFJA,COkBC,GLdG,CEoCE,AFpCD,AI+BF,CCjBE,CAAC,IDiBG,CJ/BT,AI+BU,CFKR,EAAc,AFpCD,CKcd,CAAe,KDiBb,ACjBF,CHsBuB,AGtBF,CHsBG,AFpCV,AKcd,CLdc,CKcU,CAAxB,CHsBe,CAAc,GFpCf,CAAQ,CEoCY,GFpCnC,WEoCgB;AACd,AJvCF,AMkCG,AX5BL,OAAA,CAAA,EW4BK,CNlCI,ELMT,GW4BW,AX5BX,CW4BY,IX5BZ,EKNE,AMkCG,CAAc,QAAA,CAAA,cAAA,CAAe,GAAf,CAAd,EAAmC,MAAM,CAAC,CAA1C,EAA6C,MAAM,CAAC,CAApD;AFMH,AFrCA,AFFA,AMkCG,ACnB0B,GHa9B,AJlCA,GOqB8B,KAAI,CAAC,SAAL,CAAe,OAAf;AAC5B,AZCH,KYHE,IZGc,KAAhB,CAAsB,YAAtB,EAAuD;ASwBtD,AFrCA,AFHD,AMkCI,AClBF,AZEA,ESsBD,AFrCA,IAAA,CAAA,EFHD,AOgBO,AZEE,ESsBR,CAAA,CENQ,AXhBI,CAAC,CYFZ,CLbD,AI+BG,AClBU,CLbb,AFHD,COgBE,CAAe,AZER,CAAW,CSsBnB,AFrCA,CEqCA,AGxBC,ELbD,AKaqB,AZEE,CAAC,ISsBxB,GAAA,EFrCM,AKagB,AZEH,CYFE,AZEa,EYFD,CAAZ,EAAqB,IHwB1C,GTtBmB,COfnB,APeQ,CAAP,COf6C;AEuC7C,AFrCA,AFnBF,AMiDK,ACnB2C,AZG/C,CKjCD,CAA8B,OIwDR,CEPjB,ENjDyB,CIwDR,AJxDQ,AO8BkB,EH0B1B,CEPX,CAAC,CFOU,AG1B8B,CH0B9B,AG1B+B,CP9BrD,CIwDsB,AJxDtB,EIwDsB,GAAA,AEPjB,ECnB2C,CAAe,EH0BpC,GG1BqB,CAAqB,GAArB,CH0B9C,CG1BwE,CH0BpD,AG1B0B,EH0B1B,AG1BuD,CAA7B,CAAA,CH0B1B,EAAA,CAAA,MAApB,EAAoB,EAAA,EAApB,EACC;AADI,AFnCL,AI6BG,ACpB0E,KAA7E,ILTK,CEmCI,AENN,GJ7BM,EAAE,CI6BF,CFMO,AENN,CJ7BI,CAAd,CEmCgB,CFnCC,CEmCD,CAAA,AFnCG,AI6BhB,CAAc,CFMD,CAAX,AFnCiB,CAAL,GAAS,EI6BT,CAAA,EJ7Bc,QAAL,CAAc,GI6BvB,CAAe,EJ7BhC,CI6BiB,CJ7B+B,AI6B7C,EJ7B+C,AI6BZ,EJ7BtC,EACA,EI4B4C,CAAC,CAA1C,EAA6C,MAAM,CAAC,CAApD;AFQD,AFnCD,AFvBU,AMmDR,ACpBH,AZDF,OK9Ba,AL8Bb,CK9Ba,AL8Bb,ES4BQ,AFnCC,GPOT,GK9Ba,AL8Bb,CS4Be,AFnCC,EFvBH,CEuBM,CPOnB,IOPwB,EFvBX,EI0Dc,IFnCR,CAAc,EAAd,CAAhB,CEmCwB,CAAA,OAAvB,EAAgC,OAAO,CAAC,OAAR,CAAgB,KAAK,SAArB;AAChC,AFnCD,UAAM,YAAY,GAAG,KAAK,QAAL,CAAc,EAAE,GAAG,CAAnB,CAArB;AEoCD,AFlCC,AFVH,AMoCI,ACnBH,EAAA,CHqBA,CApDD,AJcA,CI8CC,CFpCE,AKOF,CAAA,MPjBD,AMoCS,GNpCT,AMoCI,ACnBH,CAAA,GLPgB,CAAC,AKOjB,GAAA,EPjBD,IEUG,EFVH,EAAA,EOiBC;ALNE,AFX4B,AMqC1B,AClBH,EPnB6B,IEW5B,GKQI,CDkBF,CNrC0B,CAAA,COmB7B,CAAU,EDkBD,CAAC,CClBV,ELRe,CAAC,AFXa,EAAA,CMqC1B,GJ1BF,CAAsB,CFXM,CAAA,KEWN,CAAA,WAAA,CAAY,OAAO,CAAC,CAApB,EAAuB,IAAvB,CAAtB,EACW,OAAA,CAAA,WAAA,CAAY,OAAO,CAAC,CAApB,EAAuB,IAAvB,CADX;AAEA,AIyBE,AClBH,MLPC,GKOI,CDkBF,MAAM,CAAC,CClBV,CAAe,CLPA,CAAC,EIyBb,AClBH,CDkBiB,GJzBhB,CAAsB,IIyBN,CAAA,EJzBM,CAAA,WAAA,AIyBN,CJzBkB,AIyBH,GAAf,CAAd,EAAmC,MJzBS,AIyBH,CJzBI,AIyBH,CJzBtB,AIyBpB,EJzBgD,AIyBH,IJzBzB,CAAtB,CIyBqD,CJxB1C,AIwB2C,CAApD,MJxBS,CAAA,WAAA,CAAY,YAAY,CAAC,CAAzB,EAA4B,IAA5B,CADX;AEmCF,AFjCE,AFbF,AMqCI,AClBH,EH2BD,IFjCE,GKMI,EH2BN,AJ9CA,CI8CA,GG3BC,CAAY,ILNG,AFbhB,AOmBC,CH2BD,AFjCiB,AFbJ,CI8Cb,AJ9CA,EI8CA,AJ9CwB,CAAxB,EI8CA,AJ9CiC,KEa/B,GAA6B,EEiC3B,CAAJ,EAAe,CAAf,EAAwB,EFjCO,CAAA,OAAA,CAAE,UAA/B;AEmCD,AFlCC,AKMD,GALD,GLDE,KEkCM,AJ9CP,KI8CY,CJ9CZ,CAAA,EEYe,CAAC,CFZhB,CAAA,CI8CO,CAAc,EJ9CrB,EI8CO,AJ9CD,CI8CoB,AFlCzB,EFZD,CEY4B,CFZjB,CAAX,EAAc,CAAd,EI8C0B,EAAA,CFlCE,AFZZ,CI8CY,AFlCA,OAAA,CAAE,UAA7B;AEkC+B,AFjC/B,AFZD,AMmCE,MJvBD,OEiC+B,EAAE,CAAC,CAAH,GFjCjB,CEiCyB,AFjCxB,CEiCgB,IAAa,CFjC5C,CEiC8C,CAAC,CAAH,IAAQ,CAArB;AAAsB,AFhCrD,AIuBE,AClBL,KH2BS,CAAP,GG3BF,IAAA;AH4BE,AJ5CD,AMmCI,ACrDL,CAAA,CPkBC,CIyCA,AG3DD,QPkBC,CAAA,EMmCQ,ONnCR,CAAA,AMmCQ,CAAA,KNnCR,GAAA,MMmCQ,CAAe,GNnCf,QAAR,EAA8B,CMmCtB,CAA8B,GAA9B,CAAJ,EAAwC,SNnC5C,EAAuD;AEatD,AFXA,AMkCI,QNlCE,CEWD,GIuBD,MAAM,CJvBV,AIuBW,CJvBK,AFXE,GAAG,EMkCjB,CAAc,KNlCW,CAAC,EEW9B,AIuBkB,CAAA,ENlCG,CAAe,CAAf,EAAkB,QMkCrB,CAAe,GAAf,CAAd,EAAmC,ENlCiB,GAAG,CAAtC,AMkCwB,CNlC7C,AMkC8C,CAA1C,EAA6C,MAAM,CAAC,CAApD;AFUL,AFhCC,AFXA,AMkCI,EFSL,CFpDA,CFSC,OI2CD,CAAA,IJ3Ca,CAAC,II2Cd,AJ3CC,CI2CD,AJ3CmB,QI2CnB,GAAA,UAAU,CAAV,EAAqB,CAArB,EAA8B;AAE7B,AJ7CmB,MAAA,CAAC,EAAE,EI6Cf,CAAC,EJ7CmB,CI6ChB,AJ7CO,UI6CP,CAAA,OAAA,CAAE,IAAN,GAAa,CAApB;AACA,AFjCD,AFb+B,AMmC3B,EJtBJ,CE8BA,GF9BA,AFb+B,CEa/B,AFbgC,EAAE,KAAK,EEavC,CAAA,QAAA,GAAA,UAAU,kBAAV,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","file":"main.052cb5c2.js","sourceRoot":"..","sourcesContent":["import s from './settings';\n\nexport function mod(n: number, m: number) : number\n{\n  return ((n % m) + m) % m;\n}\n\nexport function unsafe(x: number, y: number) : boolean\n{\n  return (x > s.cols - 1) || (x < 0) || (y > s.rows - 1) || (y < 0);\n}\n\nexport function grid_x_to_x(x: number, center: boolean = false) : number\n{\n  return (x + (center ? 0.5 : 0)) * s.cell_size + s.h_padding;\n}\n\nexport function grid_y_to_y(y: number, center: boolean = false) : number\n{\n  return (y + (center ? 0.6 : 0)) * s.cell_size + s.v_padding;\n}\n\nexport function range(start: number, end: number) : Array<number>\n{\n  const result = Array(Math.abs(end - start))\n  let result_index = 0;\n  if (start == end) return [start];\n  while (start != end)\n    {\n      result[result_index++] = start < end ? start++ : start--;\n    }\n  return result;\n}\n\nexport function clone(obj_or_array: object | Array<any>)\n{\n  return JSON.parse(JSON.stringify(obj_or_array));\n}\n","import { mod } from './utils'\n\nclass Settings\n{\n\tpublic canvas_width: number;\n\tpublic canvas_height: number;\n\tpublic cell_size: number;\n\tpublic cols: number;\n\tpublic rows: number;\n\tpublic h_padding: number;\n\tpublic v_padding: number;\n\n\tpublic font_size: number;\n\tpublic font: string;\n\tpublic text_baseline: CanvasTextBaseline;\n\tpublic text_align: CanvasTextAlign;\n\tpublic font_color: string;\n\tpublic highlight_fg_color: string;\n\tpublic highlight_bg_color: string;\n\tpublic bg_color: string;\n\tpublic base_glyph: string;\n\n\tpublic line_width: number;\n\n\tconstructor ()\n\t{\n\t\tthis.canvas_width = 500;\n\t\tthis.canvas_height = 500;\n\t\tthis.cell_size = 20;\n\t\tthis.cols = Math.floor(this.canvas_width / this.cell_size);\n\t\tthis.rows = Math.floor(this.canvas_height / this.cell_size);\n\t\tthis.h_padding = mod(this.canvas_width, this.cell_size) / 2;\n\t\tthis.v_padding = mod(this.canvas_height, this.cell_size) / 2;\n\n\t\tthis.font_size = this.cell_size - 2;\n\t\tthis.font = `${this.font_size}px sans-serif`;\n\t\tthis.text_baseline = \"middle\";\n\t\tthis.text_align = \"center\";\n\t\tthis.font_color = \"rgb(255, 255, 255)\";\n\t\tthis.highlight_fg_color = \"rgb(0, 0, 0)\";\n\t\tthis.highlight_bg_color = \"rgb(255, 255, 255)\";\n\t\tthis.bg_color = \"rgb(0, 0, 0)\";\n\t\tthis.base_glyph = \"·\";\n\n\t\tthis.line_width = 5;\n\t}\n\n\tinstall (canvases: Array<HTMLCanvasElement>) {\n\t\tfor (let canvas of canvases)\n\t\t\t{\n\t\t\t\tconst canvas_context = canvas.getContext('2d');\n\t\t\t\tcanvas.width = this.canvas_width;\n\t\t\t\tcanvas.height = this.canvas_height;\n\t\t\t\tcanvas_context.textBaseline = this.text_baseline;\n\t\t\t\tcanvas_context.textAlign = this.text_align;\n\t\t\t\tcanvas_context.font = this.font;\n\t\t\t}\n\t}\n}\n\nconst settings = new Settings();\nexport default settings;\n","import { grid_x_to_x, grid_y_to_y } from './utils'\nimport s from './settings'\n\nexport default class ReferenceGrid\n{\n\tpublic width: number;\n\tpublic height: number;\n\tpublic cols: number;\n\tpublic rows: number;\n\tpublic v_padding: number;\n\tpublic h_padding: number;\n\tpublic canvas: HTMLCanvasElement;\n\tpublic canvas_context: CanvasRenderingContext2D;\n\tpublic glyph: string;\n\n\tconstructor(canvas: HTMLCanvasElement)\n\t{\n\t\tthis.canvas = canvas;\n\t\tthis.canvas_context = canvas.getContext('2d');\n\t\tthis.glyph = \"·\";\n\t\tthis.width = s.canvas_width;\n\t\tthis.height = s.canvas_height;\n\t\tthis.v_padding = s.v_padding;\n\t\tthis.h_padding = s.h_padding;\n\t\tthis.cols = s.cols;\n\t\tthis.rows = s.rows;\n\t}\n\n\tdraw()\n\t{\n\t\tthis.canvas_context.clearRect(0, 0, this.width, this.height);\n\t\tfor (let x = 0; x < this.cols; x++) \n\t\t{\n\t\t\tfor (let y = 0; y < this.rows; y++)\n\t\t\t{\n\t\t\t\tthis.canvas_context.fillStyle = s.bg_color;\n\t\t\t\tthis.canvas_context.fillRect(grid_x_to_x(x),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t grid_y_to_y(y),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t s.cell_size,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t s.cell_size);\n\t\t\t\tthis.canvas_context.fillStyle = s.font_color;\n\t\t\t\tthis.canvas_context.fillText(this.glyph,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t grid_x_to_x(x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t grid_y_to_y(y, true))\n\t\t\t}\n\t\t}\n\t}\n}\n","import s from '../../settings'\nimport { grid_x_to_x, grid_y_to_y } from '../../utils'\nimport Modifier from '../modifiers/modifier'\n\nexport default class Command \n{\n\tpublic x: number; public y: number; public glyph: string;\n\n\tconstructor (glyph: string, x: number, y: number)\n\t{\n\t\tthis.x = x; this.y = y; this.glyph = glyph;\n\t}\n\n\tdraw_glyph (canvas_context: CanvasRenderingContext2D)\n\t{\n\t\tcanvas_context.fillStyle = s.bg_color;\n\t\tcanvas_context.fillRect(grid_x_to_x(this.x),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size);\n\t\tcanvas_context.fillStyle = s.font_color;\n\t\tcanvas_context.fillText(this.glyph,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_x_to_x(this.x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y, true));\n\t}\n\n\tdraw (canvas_context: CanvasRenderingContext2D)\n\t{\n\t\tthis.draw_glyph(canvas_context);\n\t}\n\n\tscan (_modifiers: Array<Modifier>)\n\t{\n\t\treturn null;\n\t}\n\n\trefresh (_modifiers: Array<Modifier>)\n\t{\n\t\treturn null;\n\t}\n\t\n}\n","import s from '../../settings'\nimport { grid_x_to_x, grid_y_to_y } from '../../utils'\n\nexport default class Modifier\n{\n\tpublic x: number; public y: number; public glyph: string;\n\tconstructor (glyph: string, x: number, y: number)\n\t{\n\t\tthis.x = x; this.y = y; this.glyph = glyph;\n\t}\n\n\tdraw (canvas_context: CanvasRenderingContext2D)\n\t{\n\t\tcanvas_context.fillStyle = s.bg_color;\n\t\tcanvas_context.fillRect(grid_x_to_x(this.x),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size);\n\t\tcanvas_context.fillStyle = s.font_color;\n\t\tcanvas_context.fillText(this.glyph,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_x_to_x(this.x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y, true));\n\t}\n\n\tmodify (commands: Array<any>, _instruction_index: number)\n\t{\n\t\treturn commands;\n\t}\n}\n","import Modifier from './modifier'\nimport s from '../../settings'\n\n// Stop a line\nexport class StopLine extends Modifier\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"x\", x, y);\n\t}\n\n\tmodify (commands: Array<any>, instruction_index: number)\n\t{\n\t\tconst new_commands = commands.slice(0, instruction_index + 1);\n\t\tnew_commands.push({x: this.x, y: this.y});\n\t\t\n\t\treturn new_commands;\n\t}\n}\n\nexport class NorthLine extends Modifier\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"n\", x, y);\n\t}\n\n\tmodify (commands: Array<any>, instruction_index: number)\n\t{\n\t\tconst new_commands = commands.slice(0, instruction_index + 1)\n\t\tnew_commands.push({x: this.x, y: this.y});\n\t\tnew_commands.push({x: this.x, y: 0});\n\n\t\treturn new_commands;\n\t}\n}\n\nexport class SouthLine extends Modifier\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"s\", x, y);\n\t}\n\n\tmodify (commands: Array<any>, instruction_index: number)\n\t{\n\t\tconst new_commands = commands.slice(0, instruction_index + 1)\n\t\tnew_commands.push({x: this.x, y: this.y});\n\t\tnew_commands.push({x: this.x, y: s.rows - 1});\n\n\t\treturn new_commands;\n\t}\n}\n\nexport class EastLine extends Modifier\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"e\", x, y);\n\t}\n\n\tmodify (commands: Array<any>, instruction_index: number)\n\t{\n\t\tconst new_commands = commands.slice(0, instruction_index + 1)\n\t\tnew_commands.push({x: this.x, y: this.y});\n\t\tnew_commands.push({x: s.cols - 1, y: this.y});\n\n\t\treturn new_commands;\n\t}\n}\n\nexport class WestLine extends Modifier\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"w\", x, y);\n\t}\n\n\tmodify (commands: Array<any>, instruction_index: number)\n\t{\n\t\tconst new_commands = commands.slice(0, instruction_index + 1)\n\t\tnew_commands.push({x: this.x, y: this.y});\n\t\tnew_commands.push({x: 0, y: this.y});\n\n\t\treturn new_commands;\n\t}\n}\n","import { StopLine, \n\tNorthLine,\n\tSouthLine,\n\tEastLine,\n\tWestLine } from './modifiers/lines'\n\nexport default {\n\tLine: [StopLine, NorthLine, SouthLine, EastLine, WestLine]\n}\n","import Command from './command'\nimport accepts from '../accepts'\nimport Modifier from '../modifiers/modifier'\nimport { grid_x_to_x, grid_y_to_y, range, clone } from '../../utils'\nimport s from '../../settings'\n\nexport default class Line extends Command\n{\n\tpublic commands: Array<any>;\n\tpublic _commands: Array<any>;\n\tpublic modifiers: Array<Modifier>;\n\tpublic accepts: Array<any>;\n\n\tconstructor (glyph: string, x: number, y: number)\n\t{\n\t\tsuper(glyph, x, y);\n\t\tthis.commands = [];\n\t\tthis._commands = []; // Keep originals\n\t\tthis.accepts = accepts.Line;\n\t}\n\n\tdraw (canvas_context: CanvasRenderingContext2D)\n\t{\n\t\t//const modded_commands = this.modify(this.commands);\n\n\t\tfor (let cI = 0; cI + 1 < this.commands.length; cI ++)\n\t\t{\n\t\t\tconst command = this.commands[cI];\n\t\t\tconst next_command = this.commands[cI + 1];\n\t\t\n\t\t\tcanvas_context.beginPath();\n\t\t\tcanvas_context.moveTo(grid_x_to_x(command.x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(command.y, true));\n\t\t\tcanvas_context.lineTo(grid_x_to_x(next_command.x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(next_command.y, true));\n\t\t\tcanvas_context.strokeStyle = s.font_color;\n\t\t\tcanvas_context.lineWidth = s.line_width;\n\t\t\tcanvas_context.stroke();\n\t\t}\n\n\t\tthis.draw_glyph(canvas_context);\n\t}\n\n\tinteract (unvetted_modifiers: Array<Modifier>)\n\t{\n\t\tthis.modifiers = [];\n\t\tlet index = 0;\n\t\twhile (index < this.commands.length - 1)\n\t\t{ \n\t\t\tconst collision = this.collision_at_cmd_index(index, unvetted_modifiers);\n\t\t \tif (collision && !this.modifiers.includes(collision) && this.compatible(collision))\n\t\t \t{\n\t\t\t\tthis.modifiers.push(collision);\n\t\t \t\tthis.commands = collision.modify(this.commands, index);\n\t\t\t\tconsole.log(\"collided with \" + collision.glyph);\n\t\t \t}\n\t\t\n\t\t\tindex++;\n\t\t}\n\t}\n\n\t// At a given command index, returns the nearest collision between the command at the given index and the next command.\n\tcollision_at_cmd_index (command_index: number, modifiers: Array<Modifier>) : Modifier | false\n\t{\n\t\tif (command_index == this.commands.length - 1) { return false }\n\n\t\tconst cX = this.commands[command_index].x;\n\t\tconst cY = this.commands[command_index].y;\n\t\tconst cX1 = this.commands[command_index + 1].x;\n\t\tconst cY1 = this.commands[command_index + 1].y;\n\n\t\tconst collision_range_x = range(Math.min(cX, cX1), Math.max(cX, cX1));\n\t\tconst collision_range_y = range(Math.min(cY, cY1), Math.max(cY, cY1));\n\n\t\tconst collisions_at_curr_index = modifiers.filter(modifier => {\n\t\t\treturn modifier \n\t\t\t&& collision_range_x.includes(modifier.x) \n\t\t\t&& collision_range_y.includes(modifier.y)\n\t\t\t&& (modifier.x != cX || modifier.y != cY)\n\t\t})\n\n\t\tconst nearest_collider = collisions_at_curr_index.sort((m1, m2) => {\n\t\t\tconst m1_diff = Math.abs(m1.x - cX) + Math.abs(m1.y - cY);\n\t\t\tconst m2_diff = Math.abs(m2.x - cX) + Math.abs(m2.y - cY);\n\n\t\t\treturn m1_diff - m2_diff;\n\t\t})[0]\n\n\t\treturn nearest_collider ? nearest_collider : false;\n\t}\n\n\trefresh (modifiers: Array<Modifier>)\n\t{\n\t\tthis.commands = clone(this._commands);\n\t\tthis.interact(modifiers)\n\t}\n\n\t// Check if the given operator is present in our \"accepts\" array.\n\tcompatible (modifier: Modifier): boolean\n\t{\n\t\treturn this.accepts.find(acceptable => {\n\t\t\treturn modifier instanceof acceptable;\n\t\t}) ? true : false;\n\t}\n\n}\n\nexport class NorthLine extends Line\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"N\", x, y);\n\n\t\tthis.commands = [\n\t\t\t{\tx: this.x,\n\t\t\t\ty: this.y },\n\t\t\t{ x: this.x,\n\t\t\t\ty: 0 }\n\t\t];\n\n\t\tthis._commands = clone(this.commands);\n\t}\n}\n\nexport class SouthLine extends Line\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"S\", x, y);\n\n\t\tthis.commands = [\n\t\t\t{ x: this.x,\n\t\t\t\ty: this.y },\n\t\t\t{ x: this.x,\n\t\t\t\ty: s.rows - 1 }\n\t\t];\n\n\t\tthis._commands = clone(this.commands);\n\t}\n}\n\nexport class WestLine extends Line\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"W\", x, y);\n\n\t\tthis.commands = [\n\t\t\t{ x: this.x,\n\t\t\t\ty: this.y },\n\t\t\t{ x: 0,\n\t\t\t\ty: this.y }\n\t\t];\n\n\t\tthis._commands = clone(this.commands);\n\t}\n}\n\nexport class EastLine extends Line\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"E\", x, y);\n\n\t\tthis.commands = [\n\t\t\t{ x: this.x,\n\t\t\t\ty: this.y },\n\t\t\t{ x: s.cols - 1,\n\t\t\t\ty: this.y }\n\t\t];\n\n\t\tthis._commands = clone(this.commands);\n\t}\n}\n","import { NorthLine, SouthLine, WestLine, EastLine } from './commands/lines'\nimport { StopLine, \n\tNorthLine as MNorthLine,\n\tSouthLine as MSouthLine,\n\tEastLine as MEastLine,\n\tWestLine as MWestLine } from './modifiers/lines'\n\nexport default {\n\t\"N\": NorthLine,\n\t\"n\": MNorthLine,\n\t\"S\": SouthLine,\n\t\"s\": MSouthLine,\n\t\"W\": WestLine,\n\t\"w\": MWestLine,\n\t\"E\": EastLine,\n\t\"e\": MEastLine,\n\t\"x\": StopLine,\n}\n","import s from '../settings';\nimport glyph_mappings from './glyph_mappings';\nimport Command from './commands/command'\nimport Modifier from './modifiers/modifier'\n\n// Controller for all of our Commander.\nexport default class Commander \n{\n\tpublic canvas: HTMLCanvasElement;\n\tpublic canvas_context: CanvasRenderingContext2D;\n\tpublic commands: Array<Command>;\n\tpublic modifiers: Array<Modifier>;\n\n\tconstructor (canvas: HTMLCanvasElement)\n\t{\n\t\tthis.canvas = canvas;\n\t\tthis.canvas_context = canvas.getContext('2d');\n\t\tthis.commands = Array<Command>(s.cols * s.rows);\n\t\tthis.modifiers = Array<Modifier>(s.cols * s.rows);\n\t}\n\n\twrite (glyph: string, x: number, y: number)\n\t{\n\t\tconst new_entity = new glyph_mappings[glyph](x, y) as Command | Modifier;\n\n\t\tif (new_entity instanceof Modifier)\n\t\t\t{\n\t\t\t\tthis.modifiers[this.index_at(x, y)] = new_entity;\n\t\t\t\tthis.commands[this.index_at(x, y)] = undefined;\n\t\t\t}\n\t\telse if (new_entity instanceof Command)\n\t\t\t{\n\t\t\t\tthis.commands[this.index_at(x, y)] = new_entity;\n\t\t\t\tthis.modifiers[this.index_at(x, y)] = undefined;\n\t\t\t}\n\n\t\tthis.refresh();\n\t}\n\n\terase (x: number, y: number)\n\t{\n\t\tthis.commands[this.index_at(x, y)] = undefined;\n\t\tthis.modifiers[this.index_at(x, y)] = undefined;\n\t}\n\n\tdraw ()\n\t{\n\t\tthis.canvas_context.clearRect(0, 0, s.canvas_width, s.canvas_height);\n\t\tfor (let command of this.commands) \n\t\t\t{\n\t\t\t\tif (command) command.draw(this.canvas_context);\t\n\t\t\t}\n\t\tfor (let modifier of this.modifiers)\n\t\t\t{\n\t\t\t\tif (modifier) modifier.draw(this.canvas_context);\n\t\t\t}\n\t}\n\n\trefresh ()\n\t{\n\t\tfor (let command of this.commands)\n\t\t\t{\n\t\t\t\tif (command instanceof Command) command.refresh(this.modifiers);\n\t\t\t}\n\t}\n\n\t// Helpers\n\n\tat (x: number, y: number): Command | void\n\t{\n\t\treturn this.commands.find(op => op.x == x && op.y == y);\n\t}\n\n\tindex_at (x: number, y: number): number\n\t{\n\t\treturn y * s.cols + x;\n\t}\n}\n","// KeyboardEvent.key -> cursor event emitted\nexport const event_mappings = {\n\t'h': 'move_left',\n\t'l': 'move_right',\n\t'j': 'move_down',\n\t'k': 'move_up',\n\t'N': 'N', 'S': 'S', 'E': 'E', 'W': 'W',\n\t'n': 'n', 's': 's', 'e': 'e', 'w': 'w',\n\t'Backspace': 'Backspace',\n\t'x': 'x'\n}\n\n\nexport const events = Object.entries(event_mappings).reduce(\n\t(accum, [_key, val], _i, _a) => {\n\t\taccum.push(val);\n\t\treturn accum;\n\t}, [] as any);\n\nexport const default_fn = (_x: number, _y: number) => {};\n\n// Exports a map of events: default_fn\nexport default events.reduce(\n\t(accum: any, curr: string) => {\n\t\taccum[curr] = default_fn;\n\t\treturn accum;\n\t}, {});\n","import s from '../settings'\nimport { unsafe, grid_x_to_x, grid_y_to_y } from '../utils'\nimport default_events from './events'\nimport { event_mappings } from './events'\n\nexport default class Cursor\n{\n\tpublic glyph: string;\n\tpublic x: number;\n\tpublic y: number;\n\tpublic events: any;\n\tprivate canvas: HTMLCanvasElement;\n\tprivate canvas_context: CanvasRenderingContext2D;\n\n\tconstructor(canvas: HTMLCanvasElement, x: number = 0, y: number = 0)\n\t{\n\t\tthis.canvas = canvas;\n\t\tthis.canvas_context = canvas.getContext('2d');\n\t\tthis.glyph = \"@\";\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\t\n\t\tthis.events = default_events;\n\n\t\twindow.addEventListener(\"keydown\", this.event_handler(this));\n\t}\n\n\ton(event: string, assoc_fun: (_x: number, _y: number) => any)\n\t{\n\t\tif (event in this.events)\n\t\t\t{\n\t\t\t\tthis.events[event] = assoc_fun;\n\t\t\t} else {\n\t\t\t\tthrow new EvalError(`Event ${event} does not exist in cursor`);\n\t\t\t}\n\t}\n\n\tprivate event_handler(cursor: Cursor) \n\t{\n\t\treturn function (e: KeyboardEvent) \n\t\t{\n\t\t\tconst key = e.key;\n\n\t\t\tswitch (key) {\n\t\t\t\tcase 'h': \n\t\t\t\t\tcursor.move_left();\n\t\t\t\t\tcursor.events[event_mappings['h']](cursor.x, cursor.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'l':\n\t\t\t\t\tcursor.move_right();\n\t\t\t\t\tcursor.events[event_mappings['l']](cursor.x, cursor.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'j':\n\t\t\t\t\tcursor.move_down();\n\t\t\t\t\tcursor.events[event_mappings['j']](cursor.x, cursor.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'k':\n\t\t\t\t\tcursor.move_up();\n\t\t\t\t\tcursor.events[event_mappings['k']](cursor.x, cursor.y);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t// Look up keypressed in event_mappings, and call local event function accordingly.\n\t\t\t\t\tif (event_mappings.hasOwnProperty(key)) {\n\t\t\t\t\t\tcursor.events[event_mappings[key]](cursor.x, cursor.y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmove_up()\n\t{\n\t\tthis.x = this.x;\n\t\tthis.y = unsafe(this.x, this.y - 1) ? this.y : this.y - 1;\n\t}\n\n\tmove_down()\n\t{\n\t\tthis.x = this.x;\n\t\tthis.y = unsafe(this.x, this.y + 1) ? this.y : this.y + 1;\n\t}\n\n\tmove_left()\n\t{\n\t\tthis.x = unsafe(this.x - 1, this.y) ? this.x : this.x - 1;\n\t\tthis.y = this.y;\n\t}\n\n\tmove_right()\n\t{\n\t\tthis.x = unsafe(this.x + 1, this.y) ? this.x : this.x + 1;\n\t\tthis.y = this.y;\n\t}\n\n\tpublic draw()\n\t{\n\t\tthis.canvas_context.clearRect(0, 0, s.canvas_width, s.canvas_height);\n\t\tthis.canvas_context.fillStyle = s.highlight_bg_color;\n\t\tthis.canvas_context.fillRect(grid_x_to_x(this.x),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size)\n\t\tthis.canvas_context.fillStyle = s.highlight_fg_color;\n\t\tthis.canvas_context.fillText(this.glyph,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_x_to_x(this.x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y, true));\n\t}\n}\n","import settings from './settings'\nimport RefGrid from './reference-grid'\nimport Commander from './commander/commander'\nimport Cursor from './cursor/cursor'\n\nconst grid_canvas = document.getElementById('grid-canvas') as HTMLCanvasElement;\nconst commander_canvas = document.getElementById('commander-canvas') as HTMLCanvasElement;\nconst cursor_canvas = document.getElementById('cursor-canvas') as HTMLCanvasElement;\n\nexport default class Ripl\n{\n\tpublic commander: Commander;\n\tpublic grid: RefGrid; public cursor: Cursor;\n\n\tconstructor ()\n\t{\n\t\tsettings.install([grid_canvas, commander_canvas, cursor_canvas]);\n\n\t\tthis.grid = new RefGrid(grid_canvas);\n\t\tthis.commander = new Commander(commander_canvas);\n\t\tthis.cursor = new Cursor(cursor_canvas);\n\t\t\n\t\t// Cursor / keyboard listeners\n\t\tthis.cursor.on('N', (x: number, y: number) => this.commander.write(\"N\", x, y));\n\t\tthis.cursor.on('n', (x: number, y: number) => this.commander.write(\"n\", x, y));\n\t\tthis.cursor.on('S', (x: number, y: number) => this.commander.write(\"S\", x, y));\n\t\tthis.cursor.on('s', (x: number, y: number) => this.commander.write(\"s\", x, y));\n\t\tthis.cursor.on('E', (x: number, y: number) => this.commander.write(\"E\", x, y));\n\t\tthis.cursor.on('e', (x: number, y: number) => this.commander.write(\"e\", x, y));\n\t\tthis.cursor.on('W', (x: number, y: number) => this.commander.write(\"W\", x, y));\n\t\tthis.cursor.on('w', (x: number, y: number) => this.commander.write(\"w\", x, y));\n\t\tthis.cursor.on('Backspace', (x: number, y: number) => {\n\t\t\tthis.commander.erase(x, y); this.commander.refresh(); \n\t\t});\n\t\tthis.cursor.on('x', (x: number, y: number) => this.commander.write(\"x\", x, y));\n\t}\n\n\tdraw ()\n\t{\n\t\tthis.grid.draw();\n\t\tthis.commander.draw();\n\t\tthis.cursor.draw();\n\t}\n}\n","import Ripl from './ripl'\n\nconst ripl = new Ripl();\n\nfunction draw(): void\n{\n\tripl.draw();\n\twindow.requestAnimationFrame(draw);\n}\n\ndraw();\n"]}