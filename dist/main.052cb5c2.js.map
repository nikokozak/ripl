{"version":3,"sources":["scripts/utils.ts","scripts/settings.ts","scripts/reference-grid.ts","scripts/commander/commands/command.ts","scripts/commander/modifiers/modifier.ts","scripts/commander/modifiers/lines.ts","scripts/commander/accepts.js","scripts/commander/commands/lines.ts","scripts/commander/mappings.js","scripts/commander/commander.ts","scripts/cursor.ts","scripts/ripl.ts","scripts/main.ts"],"names":["Line","StopLine","NorthLine","SouthLine","EastLine","WestLine","MNorthLine","MSouthLine","MWestLine","MEastLine"],"mappings":";;;;;;ACAA,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;AKAA,AEAA;APEA,IAAA,QAAA,GAAA,YAAA;AODA,APuBC,WAAA,IKlBc,ILkBd,GAAA;AKjBAA,ALmBC,EKnBDA,IAAI,EAAE,CAACC,ALmBD,YAAL,GKnBK,ALmBe,EKnBJC,CLmBhB,eKnBK,EAAsBC,gBAAtB,EAAiCC,eAAjC,EAA2CC,eAA3C;AADQ,ALqBb,SAAK,MOpBQ,OPoBb,GAAqB,GAArB;AQ3BF,ANAA,AKQC,AJRD,AMAA,AEAA,AVAA,ASAA,AV4BE,IQ5BF,ANAA,ACAA,AMAA,AEAA,AVAA,ASAA,GHQMH,EPoBC,CW5BP,CVAA,EUAA,CHAA,ANAA,ACAA,AMAA,ARAA,ASAA,GFAA,ANAA,ACAA,AMAA,ACAA,CV4BE,GC5BF,AD4BmB,CC5BnB,CMOe,APqBb,KW5BF,CAAA,EVAA,COAA,ANAA,ACAA,AMAA,ARAA,ASAA,CFAA,ANAA,ACAA,AMAA,ACAA,GCAA,CAAA,GHAA,ANAA,ACAA,AMAA,ACAA,CFAA,ANAA,ACAA,AMAA,ACAA,ICAA,CAAA,CAAA,MFAA,ACAA,CFAA,ACAA,ACAA,CFAA,ACAA,ACAA,CFAA,CNAA,ACAA,CDAA,ACAA,CDAA,ACAA;AISC,APoBC,AD7BF,IAAA,GQSMI,EPoBC,IAAL,CD7BF,EC6Bc,CD7Bd,GC6BkB,CAAC,GOtBJ,EPsBD,CAAW,KAAK,AD7B9B,CAAA,OAAA,CAAA,GC6ByB,GAAoB,KAAK,CD7BlD,CAAA,CAAA,MC6Bc,CAAZ;AQ5BF,ANAA,AKSC,AJTD,AMAA,AECA,AVDA,ASAA,AV6BE,IQ7BF,ANAA,ACAA,AMAA,AECM,AVDN,ASAA,GHSMH,CIRI,CX4BH,EE7BP,ACAA,AMAA,AECa,EX4BX,CQ7BF,ANAA,ACAA,AMAA,ARAA,CUCiB,CX4BH,CQ7Bd,APAA,GSAA,AV6BkB,CE7BlB,ACAA,AMAA,AECiB,AX4BE,CE7BnB,ACAA,AMAA,AECiB,CJKF,AGNf,GV6Bc,CAAW,EW5BZ,EFDb,AECA,CHDA,ACAA,ARAA,AD6B8B,CQ7B9B,APAA,ECAA,ACAA,CDAA,ACAA,EOAA,CAAA,CFAA,APAA,COAA,APAA,ID6ByB,CU7BzB,CAAA,CV6B8C,KQ7B9C,APAA,AD6BmD,CQ7BnD,APAA,COAA,APAA,OD6Bc,CAAZ,EU7BF,CAAA,CAAA;AHUC,APoBC,AD7BF,OQSMI,EPoBC,AD7BS,GAAhB,CAAoB,CAApB,EAA+B,CAA/B,CC6BE,CD7BsC,EC6BrB,GOxBJ,IPwBI,CAAA,GAAA,CAAI,KAAK,YAAT,EAAuB,KAAK,SAA5B,IAAyC,CAA1D;AQ7BF,ANEA,AKQC,AJTD,AMSA,AERA,AVDA,ASDA,AV8BE,AD5BA,ISFF,ANEA,ACDA,AMSA,ARTA,ASDA,GHUMF,EIRG,AX4BF,AD5BE,CUQT,AVRW,CGAX,AHAY,CIDZ,CKDA,ACUA,AERA,CTAA,AHAe,CIDf,AODA,AXEU,CSFV,AGEa,CVDb,CSDA,AV8BE,AD5BkB,CAAX,CEDT,CD6BmB,COzBJ,CRHU,CAAvB,CUQF,CPRA,CCDA,CH6BmB,CAAA,EQ9BnB,CAAA,APCA,AD6BmB,CU9BnB,AV8BuB,CU9BvB,IV8B4B,CQ9B5B,CAAA,CEAA,CAAA,SV8BmB,EAAwB,KAAK,EQ9BhD,CAAA,CAAA,GEAA,CAAA,CAAA,AV8BmB,IAA0C,CAA3D;AExBD,AKKA,AJPA,AMeA,AEfA,AVSA,ADmBC,AD7BD,EYCA,IAAI,CJOCG,AIPA,EX4BC,EE1BN,ACFA,AMeA,AEfA,AVSA,MQMA,CPbA,AOaY,ATaX,CE1BY,ACFb,CAAa,CH4BK,EO3BJ,CLCd,AOaA,ARNA,CETA,AFSY,CCPgB,AOaW,ATahB,CE1BvB,ACF4B,AMe5B,CNfA,CDEuC,AOae,CPbtD,ACFuC,AMevC,CNfA,AFSA,CCPgD,AOamB,CNfnB,AFSX,EDmBnB,GAAiB,CAAlC;AQ/BF,ANOE,AKID,AJNC,AMasC,AEdvC,AVUC,ASdF,AVgCE,EW5BD,EHJD,AEAA,GHWMJ,CEOkC,AEdjC,CTGA,ACFA,AMaiC,AEdhC,AVUD,ADkBA,CEzBL,ACFA,EOLF,CROW,ACFA,AH2BT,CQhCF,ANOE,ACFA,AMasC,CRJtC,ASdF,CVgCiB,CQhCjB,CPcgB,CQIwB,CAAA,CTclB,CO5BP,AEcyB,ERJtC,MUVD,ADJD,AVgCiB,CW5Ba,ADJ9B,CFAA,CAAA,ARgC+B,EW5B9B,GDJD,CAAA,CFAA,CAAA,ORgCE,CUhCF,CAAA,CAAA,YFAA,CAAA,CAAA,EAEA;ANKc,AKKb,AJPa,AMa0B,AEbvC,AVUC,ADkBA,ADlCF,MUmBwC,CFNlCK,AEMkC,AVnBxC,CAAA,CGQmB,ACFA,AFUZ,ADkBA,CE1BO,ACFA,AMa0B,CAAA,AVnBxC,EGQuB,ACFA,CDET,ACFA,AJNd,GAAA,KCkCE,CO7Ba,ANWb,EDkBqB,CClBC,MAAM,CAAC,ADkB7B,UClBsB,CAAkB,IAAlB,CAAtB;ACRwB,AKMzB,AJRyB,AMa2B,ARFnD,ASdF,AVgCE,IUhCI,GHWAR,ELNyB,ACFA,AFWxB,ADkBA,KE3BmB,ACFA,AFWxB,CSde,ERKsB,ACFA,AFWxB,CSdK,CVgClB,CClBA,ECTwB,ACFA,AH6BN,IUhCQ,CAAC,GVgC3B,WUhCkB,CAAwB,aAAxB,CAApB;AFCA,ANKE,AKJa,AJEb,AQCF,AVUE,ASdF,AVgCE,AD/BF,ISDA,AGII,ADJE,KTcC,ADkBA,AD/BS,ISDhB,CPcE,CFbF,CSDA,ATCuB,CEaR,AFbf,EC+BE,AD/BgC,CWDZ,AXCtB,EC+BoB,AD/BuB,CWDlB,ITcV,COdf,APce,GSdkB,CAAC,GTcnB,CAAE,MDkBf,IUhCuB,CAAwB,CTc/C,iBSduB,CAAzB;AFOC,ACQsD,ARArD,ASdF,AVgCE,AD9BA,IWFI,IDciD,CAAA,ARAhD,ADkBA,AD9BG,CAAC,CSIV,ETJa,CUYyC,CRArD,ESdiB,CTcH,CQAuC,CDRtD,ACQsD,ACdjC,CFMR,CCQyC,CVZzC,CAAA,GSIb,AR0BC,CClBc,ASdc,CFMS,APQvB,ASde,CVgCH,CD9Bd,CAAE,IEYA,AFZF,CEYI,EFZK,CAAd,GWFa,CAAwB,AVgC5C,AD9B4B,CAAC,GAAG,CAAzB,CEYP,GFZuC,CAAC,GAAG,EWFvB,CAAtB,OXE6C,CAAA,OAAA,CAAE,IAAF,GAAS,CAA7C,IAAoD,CAAC,GAAG,CAA/D;ASMA,ANFD,ACFA,AMUsD,ARCrD,ADkBA,AD9BD,EGGA,ACFA,IMUsD,CAAA,EDNhD,ANFN,ADSM,ADkBA,CE3BN,ACFA,AMUsD,CNVtD,AMUsD,IDNrD,GAAc,APOd,CCTD,CAAA,ACFA,CAAA,AFWkB,GOPjB,CLJD,EH6BC,CG7BD,EDEA,AF2B2B,CClBT,CAAA,CCTlB,KCFM,CFWY,CAAE,GCTR,MDSX,CDkBA,EG7BD,EAA8C,GDE9C,EAAoD;AMGnD,ANDA,ACFA,AMQkE,ARElE,ASdF,AVgCE,IE1BA,ACFA,AOJF,IAAA,CFOO,APOA,ADkBA,EUhCP,MVgCE,CE1Bc,ACFA,AFUd,CCRe,ACFA,CH4BC,CClBC,EOPjB,AEPF,GFOwB,ENDtB,ACFA,GDE2B,ACFA,AFUV,COPW,APOX,COPY,CRyB7B,KClBiB,CAAE,CCRQ,ACFA,CDEA,ACFA,CKGL,CAAkB,IAAlB,CAAtB,AND2B,ACFA,AFU3B,CCR6B,ACFA,QDE7B,ACFA;AKIA,ANDA,ACFA,AFUA,ASVD,AV4BC,ADnCF,IGSE,ACFA,GJPF,CAAA,CSUO,APOA,ADkBA,EU5BN,ETUC,CFjBF,CWOC,CTUa,COPZ,ATVF,CGSgB,ACFA,AOAf,CREgB,ACFA,AH4Bf,CQzBgB,ERyBE,CDnCpB,ESUuB,ARyBrB,CQzB+B,APOnB,CCRZ,ACFA,AFUY,CCRY,ACFA,MFUZ,CCRY,ACFA,AFUV,COPiB,ANDP,ACFA,CKGO,EPO/B,KOP+B,CAAE,ENDT,ACFA,CDEY,ACFA,CKGL,GAAS,CNDC,ACFA,CDEjB,ACFA,CDExB,ACFA,EDGa,ACFA,KKE2B,CAAA,CNA3B,ACFA,CDEA,ACFA,KKE2B,CAAE,IAArB,CAArB,ANAa,ACFA,CDEY,ACFA,KDEK,ACFA,CDEjB,ACFA,CDCb,ACFA,EDIa,ACFA,UDEA,ACFA,CDEA,ACFA,ODEA,ACFA,CDEE,ACFA,SDAf,ACFA,EDKa,ACFA,UDEA,ACFA,CDEA,ACFA,ODEA,ACFA,CDEE,ACFA,SDDf,ACFA;AKIA,ANEA,ACFA,AMKA,AREA,ASXD,AV8BC,IExBA,ACFA,IOJD,CFIM,ACKA,AREA,ADmBA,ICnBL,ASXD,EDSC,CREY,ASXb,EFIC,ANEc,ACFA,AMKA,CPHC,ACFA,AH0Bf,CU9BD,CFIkB,CR0BC,CAAlB,CSrBA,EDLsB,APOV,COPqB,APOrB,CCLZ,ACFA,GDE2B,ACFA,GFOf,CAAE,EOPmB,CAAA,CPOjC,ECL2B,ACFA,CDEA,ACFA,GKAM,CAAE,GNER,ACFA,CKAM,ANEJ,ACFA,GKAa,ONE1C,ACFA,GKA0C,CAAA,OAAA,CAAE,IAAtB,CAAtB;AACA,ANEA,ACFA,AMKA,AREA,ADmBA,ADjCF,IGSE,ACFA,KMKK,AVZS,SGSA,ACFA,CDEC,ACFA,CJPjB,CAA4B,CAA5B,CUYE,CVZqC,EUYf,CPHtB,ACFA,CDEwB,ACFA,EJP1B,EUY8B,AVZgC,CGS/B,ACFA,AMKA,KPH7B,ACFA,EDGa,ACFA,GMIS,CAAkB,GPF3B,ACFA,CDEA,ACFA,AMIS,CAAtB,UPFa,ACFA,CDEY,ACFA,KDEK,ACFA,CDEjB,ACFA,EDEoB,ACFA,IDEpB,ACFA,CDCb,ACFA,EDIa,ACFA,ODEA,ACFA,CDEA,ACFA,WDEA,ACFA,CDEY,ACFA,KDEK,ACFA,CDEjB,ACFA,EDEoB,ACFA,IDEpB,ACFA,CDAb,ACFA;ADKA,ACFA,AMGA,ACTA,AXJqC,GGCtC,ACFA,COKC,EXJqC,GUahC,GVbgC,EUarC,ACTA,CAAA,EDSa,AVbwB,GUarC,ECTA,AXJqC,CWI5B,AXJ4B,EAAA,KWIrC,CAAiB,CAAC,WAAD,EAAc,gBAAd,EAAgC,aAAhC,CAAjB;AFKD,ACKC,ARED,ASVC,AV6BD,ADnCsC,ESStC,APOA,ADmBA,EDnCsC,KUchC,ACRA,CDQL,ATqBD,ADnCsC,CSStC,AR0BA,CQ1BA,CCKU,ACRT,AXNqC,CUcrC,CRED,CAAA,ASVa,EXNyB,EWMrB,AV6BjB,CQ1BA,AR0BA,CQ1BA,GPOA,CAAA,COPA,CR0BA,EQ1BA,APOA,CDmBA,ECnBA,GSViB,CAAA,GFGV,CR0BE,GU7BI,CFGb,APOA,ASVyB,EFGH,CAAtB,CR0BA,CQ1BiC,CAAjC,AR0B2C,EQ1BD,GEH7B,CAAZ;AFKA,ANGD,ACFA,AMGC,ARGA,ASXA,AV6BA,ADpC4D,EGc7D,ACFA,MKDO,CNGP,AOCM,ARGA,ASXA,AV6Bc,CEtBpB,ACFA,AMGC,CNHD,EMGU,ATqBU,CSrBnB,CTqBmB,GQzBH,AEJhB,AV6BmB,CEtBpB,AFsBoB,CEtBpB,ACFA,CKDoB,ALCpB,AOLkB,AV6BE,EClBnB,CCJD,ADIqB,COPG,AEJF,EROtB,ACFA,GAAA,CHwBoB,EClBnB,CAA8B,ADkBX,CQzBI,APOvB,COPuB,AEJF,CROhB,ADI4B,ASXZ,CTWrB,EENO,AFM6B,EDkBpC,CQzBuB,CAAS,AEJf,AV6BE,CClBsB,ASXV,CV6BZ,EGxBpB,CKDwB,ARyBJ,CQzBA,ALCU,AFM7B,COPuC,ANGxC,CMHoB,APO6B,CCJH,CMHH,CAAvB,CAAnB,CPOqD,EDkBlC,CAAA,CU7BF,CAAjB,CTWA,GDkBA,EGxBD,AHwBoB,EGxBoC,AHwBpC,EAAnB,EACC;AErBD,ACFA,AONA,AV4BK,SEpBA,AQRA,CV4BI,CGtBF,IONP,CV4Be,EU5BD,CRQd,ACFA,AHsBe,CEpBC,EQRE,OV4BH,CU5BG,AV4BH,CU5BG,CV4BH,CAAV,CEpBL,IQRc,CAAW,aAAX,CAAd,CAND,CAQC;AFGA,ANIA,ACFA,AMEA,AREA,ADmBE,ADpCF,GGYD,ACFA,KKCK,ACIE,CRED,AFjBE,CCoCC,ADpCA,CAAC,EEiBA,CAAC,CFjBG,EEiBA,CONC,ACIE,AREhB,EAAgB,CQFG,AREF,AFjBE,GEiBC,ADmBE,ADpCA,GCoCG,ADpCN,EEiBM,CONC,ACIpB,AVfsB,CAAnB,CAAF,CEiBP,ADmB+B,CAAC,CCnBD,CAAC,AFjBE,EEiBlC,EON0B,ACIP,ARGnB,COP0B,ACIN,EAAD,CTqBM,CSrBO,ATqBW,CDpCT,CUef,AVfe,CSWlC,CCI0C,ATqBjB,CQxBxB,ACGgD,ATqB/C,CSrBF,CARkE,CAUlE,CVjBkC,CAAE,SAA7B,GAAyC,UAAA,CAAA,OAAA,CAAE,SAAlD;ASaE,APMD,ASVD,AV4BE,ADpCH,MCoCG,GU5BG,EFIE,APMD,CDkBE,CAAC,EClBC,ASVV,CTUW,ASVC,EAAZ,AV4BE,CClBY,ASVC,CFIb,APMD,CONgB,ARwBA,CClBA,ASVjB,CTUkB,CSVE,EFIE,APMD,ADkBC,KClBI,GONT,AEJI,CFIU,APM9B,ASVmB,CFIH,CPMe,ASVA,CFIE,APMD,ASVb,AV4BlB,CQxBe,CAAf,APMD,ASVwC,ETWxC,EOPuC,UAAtC;AACA,ANGH,ACHD,AFOI,ASZ4C,AV6B5C,EErBH,IFqBG,GErBH,ACHD,CDGC,CMHQ,CRwBC,CCjBD,ASZuC,AV6BrC,IGxBX,COLoD,CFKhD,ANGH,AQRoD,AV6BjD,CQxBc,ANGjB,EFqBmB,EErBnB,CMHsB,ENGtB,ADIG,ADiBqB,CCjBD,ASZwB,CAAe,IFK7C,CAAc,AELgB,CFK9B,AELmD,EFKlC,ANG5B,ADIH,COPc,AEL8B,CFK5C,CPOgC,ASZsC,AV6BtE,CU7B4C,EFKP,AELoC,CAA7B,CAAA,ERQ/C,EAAiC,CDIE,CAAA,COPhC,MPOgC,CAAE,QAAlC;AONA,ANIF,AC9BF,AM6BE,ARIE,ASb2E,AV8B3E,ADzCJ,CITA,EAAA,EKsBE,AEFA,CV8BE,CDzCJ,CUoBQ,AVpBR,GSkBO,ANGE,EDGA,EONE,ANGT,IODiB,AVpBnB,CCyCkB,CAAC,CSrBG,AVpBtB,CUqBG,EDHkB,EPMjB,CAAoB,KDiBpB,ADzCJ,CUoBsB,EAEnB,AREC,ADiB8B,CQvBD,APMA,IDiBM,GCjBN,CAAA,CONA,CAAA,CCEX,EAGnB,IDLI,ARuBH,EQtBD,APK8B,CAAY,CAAZ,CQJX,ARIlB,EQAD,ARCgB,OAAA,CAAA,GQLG,EAKnB,MRAgB,CAAY,CAAZ,CADf,EQJkB,ARMH,EQAhB,GANmB,EAMd,GANc,ARMH,CAAA,CQAN,GANS,EAMJ,CRAC,CAAE,CQNC,EAOnB,GAPmB,EAOd,CRHJ,EQJkB,AROH,EQAN,GAPS,EAOJ,GAPI,AROH,CAAA,CQChB,GARmB,CAApB,CAXkE,CAqBlE,ARHiB,CAAE,SAHjB;AOJA,ANEF,ADME,AShBF,AV8BE,GEvBH,GFuBG,GU9BG,EFQE,EPQA,EShBP,CAAY,EAAZ,CFQE,AERa,CFQC,ARsBA,CAAC,CU9BjB,EAAoB,CFQC,EPQnB,CAAoB,EDcpB,GQtBc,ARsBa,CQtBC,AERT,CFQL,AERI,EFQa,APQ/B,AShB8B,CFQhB,AERI,AV8Bc,CQtBhC,CPQgC,AShBO,GFQF,KRsBrC,ECdgC,CAAA,EORhC,KPQgC,CAAE,UAAlC;AOPA,ACUF,ARFE,ASjB4C,AV+B5C,ADtCJ,MCsCI,GSZG,AV1BS,ESgBP,EPQA,ASjBuC,EDmB9C,GAAc,ACnBoC,CAAC,CFSjD,ARsBc,ADtClB,CSgBmB,ARsBA,ADtCS,CAA5B,EAAuC,CCsCnC,CQtBoB,CPQpB,CAAoB,ASjBwB,AV+BtB,CSZC,ACnBoC,CDmBnC,AV1B5B,EAA8D,CCsC/B,CQtBZ,AET6B,CFSf,AEToC,CFSlD,ACUH,ARFZ,CQE+B,ARFF,ADc7B,CQtBgC,AETY,CFS7B,CAAf,AETsE,CAA1B,CTiBV,CSjBuC,CFSnC,AETM,CAAA,EDmBZ,ARFhC,EACe,EQCgB,EDV/B,ACUsC,GRDvB,CQCgB,ARDhB,EQC6B,EAAb,EAAe,KRD/B,CAAY,CAAZ,EAAe,IAAf,CADf,EAEe,OAAA,CAAA,WAAA,CAAY,CAAZ,EAAe,IAAf,CAFf;AOPA,ANEH,AOQE,ARAC,ASpB2E,AVgC3E,ADvCmC,EGmBtC,GQZC,CDoBC,AV3BoC,GGmBtC,CAAA,AOQM,CAAC,CV3B+B,GU2BhC,CAAJ,CV3BoC,EGmBtC,AOQe,CPRf,EHnBsC,CAAA,EAAA,EGmBtC,EOQE,CPRF,UAAS,UAAT,EAAoC;AAEnC,AOOC,ARAA,ASpBD,AVgCA,ADxCqC,GC8BtC,CD9BsC,KWQhC,CXRgC,CGqB9B,EOOC,AV5B6B,EGqBrC,AQbA,CAAY,CDoBX,CCpBD,AXRqC,CWQtB,GAAf,EAAoB,UAAC,CAAD,EAAY,CAAZ,EAAqB;AFWzC,ANGA,AOOC,ARAD,ASrB8C,AXRc,GGmB7D,ADRA,EQee,EAGX,EDVE,ACOS,CAAd,GClB8C,GFW9C,EEXkD,CAAC,SAAL,CAAe,KAAf,CAAqB,GAArB,EAA0B,CAA1B,EAA6B,CAA7B,CAAA;AFY9C,AFrCF,AFAA,AKgDE,ACvB6E,AViC/E,GQrCC,CFrBD,AFAA,AKgDE,CCvBA,IViCF,CSVQ,CAAC,EHhDT,CFAA,EEAA,CFAA,AJ0DA,USVE,CAAwB,GHhD1B,CAAA,AFAA,CAAA,IKgDE,EHhDF,AGgDqC,CHhDrC,AFAA,CAAA,GKgD0C,OHhD1C,CAAA,CAAA,AFAA,CAAA,CAAA,EKgDqC,CAAmB,IAAnB,CAAnC;APPF,AOQE,ARFF,ASrBE,AVxBF,ADiBE,CCjBF,EAAA,MEuCA,ADMA,ASrBO,AXPE,CAAC,CAAC,IWOT,AXPa,CGsBf,AQfc,EAAZ,CAAe,EXPI,CE4BrB,ASrBE,EAAoB,AXPE,GAAH,GAAS,CAAnB,CAAF,EWOc,CAAD,CXPc,CWOF,CAAZ,EAAqB,MXPP,CAAA,OAAA,CAAE,SAA7B,GAAyC,UAAA,CAAA,OAAA,CAAE,SAAlD;ASoBD,ANnCD,AIHA,AFAA,AHEA,ASuBgD,AXN/C,CGhBD,ADDA,COoCC,CNnCD,ADDA,CKFA,AFAA,OIsCC,CAAA,CFtCD,AIyBgD,CNzBhD,EEAA,CFAA,CMyBoD,CAAC,EFapD,CAAA,KAAA,CEb+C,CAAe,CFa9D,CFtCD,CAAA,AFAA,CAAA,CMyBgD,CAAqB,GAArB,CJzBhD,CEsCQ,AFtCR,AFAA,AMyB0E,CFazE,AJtCD,AMyBgD,EFa7B,AEb0D,CFa5E,AEb+C,CAAA,CFapB,MFtC5B,CAAA,CAAA,GFAA,CAAA,CAAA,EAEA;AIsCE,ACUD,ACzB8E,AVkC/E,ESTC,ETSK,CUlCJ,GDyBD,CDVM,ACUN,GTSa,GAAG,EQnBf,CAAc,ACUf,CAAA,ATSoB,ESTpB,EDVoB,CCUpB,GTSgB,EAAjB,EQnBgB,CAAc,CAAd,CCUZ,CDV6B,CAAjB,CAAd,ECUD,EDVsC,ACUX,SDV1B,ACUD,EAAyD;ADTxD,AFvCF,AGkDE,AC1BA,AVkCF,AD5CA,IOdA,GN0DA,AD5CA,CUoCM,ATQN,AD5CA,CSyBO,AEfA,EJxBP,EGkDW,CHlDX,CIwBE,AVkCF,CUlCc,CD0BC,CDXb,AEfA,AVkCa,CQnBE,AEfA,AXVjB,EOdA,CAAA,AGkDoB,AC1BlB,AXVF,ESyBsB,AEfA,EVkCtB,ESRE,EACC,EDZc,CAAc,ATzB/B,CSyBiB,AEfM,CJxBvB,AIwBsB,CFeY,AFvClC,CEuCiB,AEfiB,CFehC,AEfoB,EAAqB,EFeH,SAAtC;AACA,AJvCF,AKmDI,AC5B4C,GFY/C,CJnCD,OKmDS,CLnDT,CMuBgD,ENvBhD,EKmDI,CAAY,AC5BoC,CAAC,ID4BjD,ELnDJ,EKmDyB,CC5BuB,CAAe,ENvB/D,EAAA,CMuBgD,CAAqB,CD4BjE,EC5B4C,EAA0B,CAA1B,EAA6B,CAA7B,CAAA;AJvBhD,AFA8B,AKoD1B,AC7B2E,AXL/E,EKlB8B,EEA9B,CGiDE,AC1BA,IXLc,EKlBc,AKoDpB,CLpDoB,EEA9B,APkBA,CAAsB,EOlBtB,GFA8B,ALkB9B,EKlB8B,ALkBO,GAArC,EAAgD,CKlBlB,CAAA,GEA9B,CAAA,OAAA,CAAA,gBAAA,CAAA,CAAA;AEyCC,ACYG,AC7BF,AXJA,ESqBD,ITrBO,GWID,EFiBN,CAAA,ACYS,AVjCI,GWIZ,AXJe,CUiCH,AC7BA,EAAZ,CAAe,CXJK,CSqBrB,ATrBsB,CSqBtB,AEjBC,EAAoB,CD6BZ,AVjCiB,CSqB1B,ACYuB,AVjCI,GSqB3B,ATrBsB,CAAS,GAAG,CWIZ,CAAD,CXJgB,CUiCL,AC7BC,CAAZ,EAAqB,CFiB1C,ATrBsB,CUiCC,AVjCF,CAApB,EUiCoC,2BAA5B,CAAN;ADVF,AFzCF,AFAC,AKoDG,AC9B4C,AXH9C,IOnBF,EPmBM,EOnBN,CEyCO,EFzCP,AFAC,EMsB+C,KAAI,AXHlC,CKnBjB,AMsBoD,CNtBvC,CEAd,AFAC,ALmBoB,CAAnB,CSsBA,AJzCuB,CIyCH,AJzCrB,EAAiC,CEAlC,CIsBgD,CJtBhD,AIsB+D,IFmB7D,CAA8B,AEnBgB,CFmB9C,AEnBmE,EFmBlC,CAAjC,AEnB8C,EFmBV,AEnBoC,CAA1B,EAA6B,CAA7B,CAAA,KFmBV,CAAA,OAAA,CAAE,YAAtC,EAAoD,UAAA,CAAA,OAAA,CAAE,aAAtD;AFzCgC,AGqDhC,AC/B6E,AXF7E,EOpBgC,CG6CjC,ECvBC,CXFI,KOpB4B,AFEhC,ALkBS,COpBuB,GPoBnB,COpBmB,CFEhC,CEFgC,AFEhC,ALkBA,EAAkB,EKlBlB,CAAA,CEFgC,CAAA,EFEhC,ALkByB,CAAC,CKlBpB,GAAN,CLkByB,CKlBd,ALkBO,CKlBlB,EAAc,CAAd,KAAgB;AIwChB,AJvCA,AMoBA,SFmBoB,AEnBf,IFmBe,EAAA,AEnBpB,CAAY,EFmBQ,AEnBpB,CFmBoB,AEnBL,EFmBK,CEnBpB,CFmBoB,CEnBA,EFmBA,KAAK,GEnBJ,CAAD,EAAY,CAAZ,CFmBpB,CEnByC,CFmBrB,EAAA,GAAA,EAAA,CAAA,MAApB,EAAoB,EAAA,EAApB,EACC;AADI,AFnCN,AGgDQ,AChCuC,AXF9C,EUkCO,MAAA,CAAA,AVlCA,CSqBE,CFnCV,EIgB+C,CXFlC,COdb,CAAa,CEmCI,CCaT,AChC2C,AXFlC,CUkCT,AChC4C,CFmBnC,CFnCjB,APcC,CSqBgB,CAAA,AFnCW,APezB,COfH,CEmCiB,CAAX,AFnCiC,CAAvC,CIgB+C,CJhBC,AIgBc,GDgCtD,EChCuC,CDgC/C,AChCoE,GAArB,EAA0B,CAA1B,EAA6B,CAA7B,CDgCzB,AChCyB,ODgC/C,EAAqC;ADXlC,AFrCH,AFFA,AKoDC,AClC6E,AXAzE,EKlBL,ELkBK,CWAJ,GJhBD,EEqCO,AJvCP,ALkBW,CKlBX,AKoDQ,AVlCI,EOhBZ,GAEC,CEmCE,EAAa,CJvChB,CAAA,AKoDkB,CHhDjB,AGgDO,CHhDP,APcuB,CUkCU,CVlCvB,CSqBY,ATrBlB,CSqBmB,AFnCvB,AFJD,CEIC,CPc6B,CKlB9B,CIuCgB,CAAa,AFnC5B,EAAM,APc4B,GSqBD,ATrBI,EOdrC,CFJO,ALkBsB,COdhB,CAAb,CPc2C,COd3B,CAAhB,GFJD,ALkBiD,EOd9B,AFJW,ALkBA,CSqBd,ETrBsC,COhBtD,IPgB2D,EAAtD,OKlBL,EAAuD;AIwCpD,AJtCF,AKoDC,ACnCD,AXAG,QKjBG,CMiBD,CDmCE,GAAG,ECnCV,CDmCa,ACnCD,CDmCE,CAAC,ACnCf,CAAe,CNjBG,CKoDjB,CCnCD,CNjBqB,CMiBD,ONjBS,CAAC,EMiBT,CAAD,ENjBC,AMiBW,CNjBI,AMiBhB,CNjBC,CMiBoB,CNjBF,iBAAiB,GAAG,CAAtC,CAArB;AEGA,AFFA,AMgB8C,IJd9C,AFFA,KEEI,CAAC,GIcyC,GNhBlC,CAAC,CEEb,AIckD,CAAC,EJdnC,AFFhB,CAAkB,CEElB,KIc8C,CAAe,KAAf,CAAqB,GAArB,EAA0B,CAA1B,EAA6B,CAA7B,CAAA;AFsB9C,AFnCA,AFHmB,AKqDlB,ACrC4E,AXC7E,IOdA,CIaA,CNhBmB,CAAC,EIsCC,AFnCjB,AFHkB,ALiBf,COdF,GEmCgB,CJtCM,AKqDlB,CDfY,AJtCH,ALiBlB,EUoCC,CDfoB,CAAA,AFnCrB,EEmCqB,CFnCJ,CEmCI,CFnCrB,CAJ+C,CEuC1B,AFnCA,KEmCK,SAA1B,EAAqB,EAAA,GAAA,EAAA,CAAA,MAArB,EAAqB,EAAA,EAArB,EACC;AADI,AJtCyB,AKsD5B,ACrCF,AXCD,MKlB+B,CAAC,EAAE,AMiB5B,CFqBI,GCgBF,CLtD+B,CMiBtC,CDqCE,ACrCU,EFqBK,AErBjB,CAAe,EFqBE,EAAA,CAAA,EAAA,CAAZ,GErBL,EAA4B,UAAC,CAAD,EAAY,CAAZ,EAAqB;AFuB/C,AFpCF,AFJkB,AKuDf,ACrCF,IJdD,CFJA,CMkBC,GJdG,CEoCE,AFpCD,AGmDF,CCrCE,CAAC,KJdN,AGmDU,CDfR,ACeS,EDfK,AFpCD,CIcd,CAAe,KDqCb,ACrCF,CFsBuB,AEtBF,CFsBG,AFpCV,AIcd,CJdc,CIcU,CAAxB,CFsBe,CAAc,GFpCf,CAAQ,CEoCY,GFpCnC,WEoCgB;AACd,AJvCF,AKsDG,AVhDL,OAAA,CAAA,EUgDK,CLtDI,ELMT,GAAA,CUgDY,CAAC,GVhDb,EKNE,CKsDG,CAAe,WAAf,EAA4B,OAAO,CAAC,CAApC,EAAuC,OAAO,CAAC,CAA/C;ADdH,AFrCA,AFFA,AKsDG,ACvC0B,GFa9B,AJlCA,GMqB8B,KAAI,CAAC,SAAL,CAAe,OAAf;AAC5B,AXCH,KWHE,IXGc,KAAhB,CAAsB,YAAtB,EAAuD;ASwBtD,AFrCA,AFHD,AKsDI,ACtCF,AXEA,ESsBD,AFrCA,IAAA,CAAA,EFHD,AMgBO,AXEE,ESsBR,CAAA,CCcQ,AVpCI,CAAC,CWFZ,CJbD,AGmDG,ACtCU,CJbb,AFHD,CMgBE,CAAe,AXER,CAAW,CSsBnB,AFrCA,CEqCA,AExBC,EJbD,AIaqB,AXEE,CAAC,ISsBxB,GAAA,EFrCM,AIagB,AXEH,CWFE,AXEa,EWFD,CAAZ,EAAqB,IFwB1C,GTtBmB,COfnB,APeQ,CAAP,COf6C;AEuC7C,AFrCA,AFnBF,AKqEK,ACvC2C,AXG/C,CKjCD,CAA8B,OIwDR,CCajB,ELrEyB,CIwDR,AJxDQ,AM8BkB,EF0B1B,ECaV,CDbU,ACaT,ACvCuC,CF0B9B,AE1B+B,CN9BrD,CIwDsB,AJxDtB,EIwDsB,GAAA,ECajB,ACvC2C,CAAe,EF0BpC,GE1BqB,CAAqB,GAArB,CF0B9C,CE1BwE,CF0BpD,AE1B0B,EF0B1B,AE1BuD,CAA7B,CAAA,CF0B1B,EAAA,CAAA,MAApB,EAAoB,EAAA,EAApB,EACC;AADI,AFnCL,AGiDG,ACxC0E,KAA7E,IJTK,CEmCI,ACcN,GHjDM,EAAE,EEmCK,ACcN,CHjDI,AGiDH,CHjDX,CEmCgB,CFnCC,CEmCD,CAAA,AFnCG,CGiDhB,CDda,ACcE,CDdb,AFnCiB,CAAL,GAAS,KAAK,EGiD5B,EAA6B,IHjDN,CAAc,EGiDD,CAAC,CAArC,EHjDH,AGiD2C,EHjDK,EAAE,EAAlD,CGiDkD,CHhDlD,AGgDmD,CAAhD;ADZD,AFnCD,AFvBU,AKuER,ACxCH,AXDF,OK9Ba,AL8Bb,CK9Ba,AL8Bb,ES4BQ,AFnCC,GPOT,GK9Ba,AL8Bb,CS4Be,AFnCC,EFvBH,CEuBM,CPOnB,IOPwB,EFvBX,EI0Dc,IFnCR,CAAc,EAAd,CAAhB,CEmCwB,CAAA,OAAvB,EAAgC,OAAO,CAAC,OAAR,CAAgB,KAAK,SAArB;AAChC,AFnCD,UAAM,YAAY,GAAG,KAAK,QAAL,CAAc,EAAE,GAAG,CAAnB,CAArB;AEoCD,AFlCC,AFVH,AKwDI,ACvCH,EAAA,CFqBA,CApDD,AJcA,CI8CC,CFpCE,AIOF,CAAA,MNjBD,AKwDS,GLxDT,AKwDI,ACvCH,CAAA,GJPgB,CAAC,AIOjB,GAAA,ENjBD,IEUG,EFVH,EAAA,EMiBC;AJNE,AFX4B,AKyD1B,ACtCH,ENnB6B,IEW5B,GIQI,CDsCF,CLzD0B,CAAA,CMmB7B,CAAU,GDsCA,CAAC,ACtCX,EJRe,CAAC,AFXa,EAAA,IEW5B,AG8CE,CH9CoB,CFXM,CAAA,KEWN,CAAA,WAAA,CAAY,OAAO,CAAC,CAApB,EAAuB,IAAvB,CAAtB,EACW,OAAA,CAAA,WAAA,CAAY,OAAO,CAAC,CAApB,EAAuB,IAAvB,CADX;AAEA,AG6CE,ACtCH,MJPC,GIOI,CDsCF,OAAO,CAAC,ACtCX,CAAe,CJPA,CAAC,EIOhB,CDsCG,CAAe,EH7CjB,CAAsB,OAAA,CAAA,AG6CpB,EAA4B,OAAO,CAAC,CH7ChB,AG6CpB,CH7CgC,CG6CO,OAAO,CAAC,CAA/C,EH7C4C,CAAC,CAAzB,EAA4B,IAA5B,CAAtB,EACW,OAAA,CAAA,WAAA,CAAY,YAAY,CAAC,CAAzB,EAA4B,IAA5B,CADX;AEmCF,AFjCE,AFbF,AKyDI,ACtCH,EF2BD,IFjCE,GIMI,EF2BN,AJ9CA,CI8CA,GE3BC,CAAY,IJNG,AFbhB,AMmBC,CF2BD,AFjCiB,AFbJ,CI8Cb,AJ9CA,EI8CA,AJ9CwB,CAAxB,EI8CA,AJ9CiC,KEa/B,GAA6B,EEiC3B,CAAJ,EAAe,CAAf,EAAwB,EFjCO,CAAA,OAAA,CAAE,UAA/B;AEmCD,AFlCC,AIMD,GALD,GJDE,KEkCM,AJ9CP,KI8CY,CJ9CZ,CAAA,EEYe,CAAC,CFZhB,CAAA,CI8CO,CAAc,EJ9CrB,EI8CO,AJ9CD,CI8CoB,AFlCzB,EFZD,CEY4B,CFZjB,CAAX,EAAc,CAAd,EI8C0B,EAAA,CFlCE,AFZZ,CI8CY,AFlCA,OAAA,CAAE,UAA7B;AEkC+B,AFjC/B,AFZD,AKuDE,MH3CD,OEiC+B,ACUzB,EDV2B,CAAC,ACUjC,CDV8B,GFjCjB,CEiCyB,AFjCxB,CEiCgB,IAAa,CFjC5C,CEiC8C,CAAC,CAAH,IAAQ,CAArB;AAAsB,AFhCrD,AG2CE,ACtCL,KF2BS,CAAP,GE3BF,CDsCK,GCtCL,IDsCY,CAAC,OAAR;ADVH,AJ5CD,AKuDI,ACzEL,CAAA,CNkBC,CIyCA,AE3DD,ODyEK,CLvDJ,CAAA,KKuDW,CAAC,GLvDZ,CAAA,EKuDI,CAAe,GLvDnB,GAAA,GKuDI,EAA0B,KLvDtB,EKuD6B,CAAC,CAAlC,EAAqC,ELvDzC,EAA8B,GKuDkB,CAAC,CAA7C,YLvDJ,EAAuD;AEatD,AFXA,AKsDG,QLtDG,CEWD,UAAL,CAAgB,AFXE,GAAG,QAAQ,CAAC,EEW9B,GFXqB,CAAe,CAAf,EAAkB,iBAAiB,GAAG,CAAtC,CAArB;AI4CD,AFhCC,AFXA,EI2CD,CFpDA,CFSC,OI2CD,CAAA,IJ3Ca,CAAC,II2Cd,AJ3CC,CI2CD,AJ3CmB,QI2CnB,GAAA,UAAU,CAAV,EAAqB,CAArB,EAA8B;AAE7B,AJ7CmB,AKsDjB,MLtDiB,CAAC,EAAE,EI6Cf,CAAC,CCSD,CLtDoB,CI6ChB,AJ7CO,CKsDhB,SDTS,CAAA,OAAA,CAAE,IAAN,GAAa,CAApB;AACA,AFjCD,AFb+B,AKuD3B,EH1CJ,CE8BA,GF9BA,AFb+B,CEa/B,AFbgC,EAAE,CKuD9B,ILvDmC,EEavC,CAAA,AG0CW,CAAC,MAAR,CH1CJ,AG0CmB,GH1CnB,AG0CI,EAAoB,OAAO,CH1CrB,AG0CsB,CAA5B,EAA+B,OAAO,CAAC,CAAvC,MH1CJ,EAA6C;AAE5C,AFfkB,AKwDf,KLxDH,IEeK,SAAL,GAAiB,EAAjB;AEgCF,AF/BE,AFfA,IAAA,IEeI,CE+BN,IF/BW,GAAG,AFfA,CEeZ,AFfa,CI8Cf,GJ9CE,CAAkB;AIzBpB,AJyBqB,AKwDjB,CDjFJ,EAAA,GJyBqB,CAAC,EAAE,IKwDf,CLxDoB,CAAT,CKwDhB;AHxCF,AFhB8B,AKyD3B,MLzD2B,CAAC,EAAE,CKyD9B,CHzCI,KAAK,CGyCF,CAAC,CHzCI,KAAK,AGyCjB,CAAe,GAAf,EAAoB,EHzCR,CAAc,IGyCC,CAAC,CHzChB,AGyCZ,EAA+B,CHzCI,CAAtC,EACA,GGwCyC,CAAC,CAAvC;AHvCF,AFlBiB,AK0Df,KL1DH,KEkBO,SAAS,GAAG,KAAK,sBAAL,CAA4B,KAA5B,EAAmC,kBAAnC,CAAlB;AFhBD,WAAO,YAAP;AEiBE,AFhBF,AKwDE,GL/DH,OEuBO,GGwCC,GAAL,GHxCa,IAAI,CAAC,KAAK,SAAL,CAAe,QAAf,CAAwB,SAAxB,CAAd,IAAoD,KAAK,UAAL,CAAgB,SAAhB,CAAxD,EACA;AACA,AGuCC,UAAA,GHvCI,IGuCG,CAAC,IHvCT,CAAe,CGuCd,CAAe,EHvChB,CAAoB,AGuCnB,EAAoB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","file":"main.052cb5c2.js","sourceRoot":"..","sourcesContent":["import s from './settings';\n\nexport function mod(n: number, m: number) : number\n{\n  return ((n % m) + m) % m;\n}\n\nexport function unsafe(x: number, y: number) : boolean\n{\n  return (x > s.cols - 1) || (x < 0) || (y > s.rows - 1) || (y < 0);\n}\n\nexport function grid_x_to_x(x: number, center: boolean = false) : number\n{\n  return (x + (center ? 0.5 : 0)) * s.cell_size + s.h_padding;\n}\n\nexport function grid_y_to_y(y: number, center: boolean = false) : number\n{\n  return (y + (center ? 0.6 : 0)) * s.cell_size + s.v_padding;\n}\n\nexport function range(start: number, end: number) : Array<number>\n{\n  const result = Array(Math.abs(end - start))\n  let result_index = 0;\n  if (start == end) return [start];\n  while (start != end)\n    {\n      result[result_index++] = start < end ? start++ : start--;\n    }\n  return result;\n}\n\nexport function clone(obj_or_array: object | Array<any>)\n{\n  return JSON.parse(JSON.stringify(obj_or_array));\n}\n","import { mod } from './utils'\n\nclass Settings\n{\n\tpublic canvas_width: number;\n\tpublic canvas_height: number;\n\tpublic cell_size: number;\n\tpublic cols: number;\n\tpublic rows: number;\n\tpublic h_padding: number;\n\tpublic v_padding: number;\n\n\tpublic font_size: number;\n\tpublic font: string;\n\tpublic text_baseline: CanvasTextBaseline;\n\tpublic text_align: CanvasTextAlign;\n\tpublic font_color: string;\n\tpublic highlight_fg_color: string;\n\tpublic highlight_bg_color: string;\n\tpublic bg_color: string;\n\tpublic base_glyph: string;\n\n\tpublic line_width: number;\n\n\tconstructor ()\n\t{\n\t\tthis.canvas_width = 500;\n\t\tthis.canvas_height = 500;\n\t\tthis.cell_size = 20;\n\t\tthis.cols = Math.floor(this.canvas_width / this.cell_size);\n\t\tthis.rows = Math.floor(this.canvas_height / this.cell_size);\n\t\tthis.h_padding = mod(this.canvas_width, this.cell_size) / 2;\n\t\tthis.v_padding = mod(this.canvas_height, this.cell_size) / 2;\n\n\t\tthis.font_size = this.cell_size - 2;\n\t\tthis.font = `${this.font_size}px sans-serif`;\n\t\tthis.text_baseline = \"middle\";\n\t\tthis.text_align = \"center\";\n\t\tthis.font_color = \"rgb(255, 255, 255)\";\n\t\tthis.highlight_fg_color = \"rgb(0, 0, 0)\";\n\t\tthis.highlight_bg_color = \"rgb(255, 255, 255)\";\n\t\tthis.bg_color = \"rgb(0, 0, 0)\";\n\t\tthis.base_glyph = \"·\";\n\n\t\tthis.line_width = 5;\n\t}\n\n\tinstall (canvases: Array<HTMLCanvasElement>) {\n\t\tfor (let canvas of canvases)\n\t\t\t{\n\t\t\t\tconst canvas_context = canvas.getContext('2d');\n\t\t\t\tcanvas.width = this.canvas_width;\n\t\t\t\tcanvas.height = this.canvas_height;\n\t\t\t\tcanvas_context.textBaseline = this.text_baseline;\n\t\t\t\tcanvas_context.textAlign = this.text_align;\n\t\t\t\tcanvas_context.font = this.font;\n\t\t\t}\n\t}\n}\n\nconst settings = new Settings();\nexport default settings;\n","import { grid_x_to_x, grid_y_to_y } from './utils'\nimport s from './settings'\n\nexport default class ReferenceGrid\n{\n\tpublic width: number;\n\tpublic height: number;\n\tpublic cols: number;\n\tpublic rows: number;\n\tpublic v_padding: number;\n\tpublic h_padding: number;\n\tpublic canvas: HTMLCanvasElement;\n\tpublic canvas_context: CanvasRenderingContext2D;\n\tpublic glyph: string;\n\n\tconstructor(canvas: HTMLCanvasElement)\n\t{\n\t\tthis.canvas = canvas;\n\t\tthis.canvas_context = canvas.getContext('2d');\n\t\tthis.glyph = \"·\";\n\t\tthis.width = s.canvas_width;\n\t\tthis.height = s.canvas_height;\n\t\tthis.v_padding = s.v_padding;\n\t\tthis.h_padding = s.h_padding;\n\t\tthis.cols = s.cols;\n\t\tthis.rows = s.rows;\n\t}\n\n\tdraw()\n\t{\n\t\tthis.canvas_context.clearRect(0, 0, this.width, this.height);\n\t\tfor (let x = 0; x < this.cols; x++) \n\t\t{\n\t\t\tfor (let y = 0; y < this.rows; y++)\n\t\t\t{\n\t\t\t\tthis.canvas_context.fillStyle = s.bg_color;\n\t\t\t\tthis.canvas_context.fillRect(grid_x_to_x(x),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t grid_y_to_y(y),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t s.cell_size,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t s.cell_size);\n\t\t\t\tthis.canvas_context.fillStyle = s.font_color;\n\t\t\t\tthis.canvas_context.fillText(this.glyph,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t grid_x_to_x(x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t grid_y_to_y(y, true))\n\t\t\t}\n\t\t}\n\t}\n}\n","import s from '../../settings'\nimport { grid_x_to_x, grid_y_to_y } from '../../utils'\nimport Modifier from '../modifiers/modifier'\n\nexport default class Command \n{\n\tpublic x: number; public y: number; public glyph: string;\n\n\tconstructor (glyph: string, x: number, y: number)\n\t{\n\t\tthis.x = x; this.y = y; this.glyph = glyph;\n\t}\n\n\tdraw_glyph (canvas_context: CanvasRenderingContext2D)\n\t{\n\t\tcanvas_context.fillStyle = s.bg_color;\n\t\tcanvas_context.fillRect(grid_x_to_x(this.x),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size);\n\t\tcanvas_context.fillStyle = s.font_color;\n\t\tcanvas_context.fillText(this.glyph,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_x_to_x(this.x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y, true));\n\t}\n\n\tdraw (canvas_context: CanvasRenderingContext2D)\n\t{\n\t\tthis.draw_glyph(canvas_context);\n\t}\n\n\tscan (_modifiers: Array<Modifier>)\n\t{\n\t\treturn null;\n\t}\n\n\trefresh (_modifiers: Array<Modifier>)\n\t{\n\t\treturn null;\n\t}\n\t\n}\n","import s from '../../settings'\nimport { grid_x_to_x, grid_y_to_y } from '../../utils'\n\nexport default class Modifier\n{\n\tpublic x: number; public y: number; public glyph: string;\n\tconstructor (glyph: string, x: number, y: number)\n\t{\n\t\tthis.x = x; this.y = y; this.glyph = glyph;\n\t}\n\n\tdraw (canvas_context: CanvasRenderingContext2D)\n\t{\n\t\tcanvas_context.fillStyle = s.bg_color;\n\t\tcanvas_context.fillRect(grid_x_to_x(this.x),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size);\n\t\tcanvas_context.fillStyle = s.font_color;\n\t\tcanvas_context.fillText(this.glyph,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_x_to_x(this.x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y, true));\n\t}\n\n\tmodify (commands: Array<any>, _instruction_index: number)\n\t{\n\t\treturn commands;\n\t}\n}\n","import Modifier from './modifier'\nimport s from '../../settings'\n\n// Stop a line\nexport class StopLine extends Modifier\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"x\", x, y);\n\t}\n\n\tmodify (commands: Array<any>, instruction_index: number)\n\t{\n\t\tconst new_commands = commands.slice(0, instruction_index + 1);\n\t\tnew_commands.push({x: this.x, y: this.y});\n\t\t\n\t\treturn new_commands;\n\t}\n}\n\nexport class NorthLine extends Modifier\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"n\", x, y);\n\t}\n\n\tmodify (commands: Array<any>, instruction_index: number)\n\t{\n\t\tconst new_commands = commands.slice(0, instruction_index + 1)\n\t\tnew_commands.push({x: this.x, y: this.y});\n\t\tnew_commands.push({x: this.x, y: 0});\n\n\t\treturn new_commands;\n\t}\n}\n\nexport class SouthLine extends Modifier\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"s\", x, y);\n\t}\n\n\tmodify (commands: Array<any>, instruction_index: number)\n\t{\n\t\tconst new_commands = commands.slice(0, instruction_index + 1)\n\t\tnew_commands.push({x: this.x, y: this.y});\n\t\tnew_commands.push({x: this.x, y: s.rows - 1});\n\n\t\treturn new_commands;\n\t}\n}\n\nexport class EastLine extends Modifier\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"e\", x, y);\n\t}\n\n\tmodify (commands: Array<any>, instruction_index: number)\n\t{\n\t\tconst new_commands = commands.slice(0, instruction_index + 1)\n\t\tnew_commands.push({x: this.x, y: this.y});\n\t\tnew_commands.push({x: s.cols - 1, y: this.y});\n\n\t\treturn new_commands;\n\t}\n}\n\nexport class WestLine extends Modifier\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"w\", x, y);\n\t}\n\n\tmodify (commands: Array<any>, instruction_index: number)\n\t{\n\t\tconst new_commands = commands.slice(0, instruction_index + 1)\n\t\tnew_commands.push({x: this.x, y: this.y});\n\t\tnew_commands.push({x: 0, y: this.y});\n\n\t\treturn new_commands;\n\t}\n}\n","import { StopLine, \n\tNorthLine,\n\tSouthLine,\n\tEastLine,\n\tWestLine } from './modifiers/lines'\n\nexport default {\n\tLine: [StopLine, NorthLine, SouthLine, EastLine, WestLine]\n}\n","import Command from './command'\nimport accepts from '../accepts'\nimport Modifier from '../modifiers/modifier'\nimport { grid_x_to_x, grid_y_to_y, range, clone } from '../../utils'\nimport s from '../../settings'\n\nexport default class Line extends Command\n{\n\tpublic commands: Array<any>;\n\tpublic _commands: Array<any>;\n\tpublic modifiers: Array<Modifier>;\n\tpublic accepts: Array<any>;\n\n\tconstructor (glyph: string, x: number, y: number)\n\t{\n\t\tsuper(glyph, x, y);\n\t\tthis.commands = [];\n\t\tthis._commands = []; // Keep originals\n\t\tthis.accepts = accepts.Line;\n\t}\n\n\tdraw (canvas_context: CanvasRenderingContext2D)\n\t{\n\t\t//const modded_commands = this.modify(this.commands);\n\n\t\tfor (let cI = 0; cI + 1 < this.commands.length; cI ++)\n\t\t{\n\t\t\tconst command = this.commands[cI];\n\t\t\tconst next_command = this.commands[cI + 1];\n\t\t\n\t\t\tcanvas_context.beginPath();\n\t\t\tcanvas_context.moveTo(grid_x_to_x(command.x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(command.y, true));\n\t\t\tcanvas_context.lineTo(grid_x_to_x(next_command.x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(next_command.y, true));\n\t\t\tcanvas_context.strokeStyle = s.font_color;\n\t\t\tcanvas_context.lineWidth = s.line_width;\n\t\t\tcanvas_context.stroke();\n\t\t}\n\n\t\tthis.draw_glyph(canvas_context);\n\t}\n\n\tinteract (unvetted_modifiers: Array<Modifier>)\n\t{\n\t\tthis.modifiers = [];\n\t\tlet index = 0;\n\t\twhile (index < this.commands.length - 1)\n\t\t{ \n\t\t\tconst collision = this.collision_at_cmd_index(index, unvetted_modifiers);\n\t\t \tif (collision && !this.modifiers.includes(collision) && this.compatible(collision))\n\t\t \t{\n\t\t\t\tthis.modifiers.push(collision);\n\t\t \t\tthis.commands = collision.modify(this.commands, index);\n\t\t\t\tconsole.log(\"collided with \" + collision.glyph);\n\t\t \t}\n\t\t\n\t\t\tindex++;\n\t\t}\n\t}\n\n\t// At a given command index, returns the nearest collision between the command at the given index and the next command.\n\tcollision_at_cmd_index (command_index: number, modifiers: Array<Modifier>) : Modifier | false\n\t{\n\t\tif (command_index == this.commands.length - 1) { return false }\n\n\t\tconst cX = this.commands[command_index].x;\n\t\tconst cY = this.commands[command_index].y;\n\t\tconst cX1 = this.commands[command_index + 1].x;\n\t\tconst cY1 = this.commands[command_index + 1].y;\n\n\t\tconst collision_range_x = range(Math.min(cX, cX1), Math.max(cX, cX1));\n\t\tconst collision_range_y = range(Math.min(cY, cY1), Math.max(cY, cY1));\n\n\t\tconst collisions_at_curr_index = modifiers.filter(el => {\n\t\t\treturn el \n\t\t\t&& collision_range_x.includes(el.x) \n\t\t\t&& collision_range_y.includes(el.y)\n\t\t\t&& (el.x != cX || el.y != cY)\n\t\t})\n\n\t\tconst nearest_collider = collisions_at_curr_index.sort((m1, m2) => {\n\t\t\tconst m1_diff = Math.abs(m1.x - cX) + Math.abs(m1.y - cY);\n\t\t\tconst m2_diff = Math.abs(m2.x - cX) + Math.abs(m2.y - cY);\n\n\t\t\tif (m1_diff < m2_diff) return -1;\n\t\t\tif (m1_diff > m2_diff) return 1;\n\t\t\tif (m1_diff == m2_diff) return 0;\n\t\t})[0]\n\n\t\tconsole.log(collisions_at_curr_index)\n\t\tconsole.log(command_index)\n\t\tconsole.log(nearest_collider)\n\n\t\treturn nearest_collider ? nearest_collider : false;\n\t}\n\n\trefresh (modifiers: Array<Modifier>)\n\t{\n\t\tthis.commands = clone(this._commands);\n\t\tthis.interact(modifiers)\n\t}\n\n\t// Check if the given operator is present in our \"accepts\" array.\n\tcompatible (modifier: Modifier): boolean\n\t{\n\t\tlet found = false;\n\t\tfor (let acceptable of this.accepts) { if (modifier instanceof acceptable) found = true; }\n\t\treturn found;\n\t}\n\n}\n\nexport class NorthLine extends Line\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"N\", x, y);\n\n\t\tthis.commands = [\n\t\t\t{\tx: this.x,\n\t\t\t\ty: this.y },\n\t\t\t{ x: this.x,\n\t\t\t\ty: 0 }\n\t\t];\n\n\t\tthis._commands = [\n\t\t\t{\tx: this.x,\n\t\t\t\ty: this.y },\n\t\t\t{ x: this.x,\n\t\t\t\ty: 0 }\n\t\t];\n\t\tthis._commands = clone(this.commands);\n\t}\n}\n\nexport class SouthLine extends Line\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"S\", x, y);\n\n\t\tthis.commands = [\n\t\t\t{ x: this.x,\n\t\t\t\ty: this.y },\n\t\t\t{ x: this.x,\n\t\t\t\ty: s.rows - 1 }\n\t\t];\n\t\tthis._commands = clone(this.commands);\n\t}\n}\n\nexport class WestLine extends Line\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"W\", x, y);\n\n\t\tthis.commands = [\n\t\t\t{ x: this.x,\n\t\t\t\ty: this.y },\n\t\t\t{ x: 0,\n\t\t\t\ty: this.y }\n\t\t];\n\t\tthis._commands = clone(this.commands);\n\t}\n}\n\nexport class EastLine extends Line\n{\n\tconstructor (x: number, y: number)\n\t{\n\t\tsuper(\"E\", x, y);\n\n\t\tthis.commands = [\n\t\t\t{ x: this.x,\n\t\t\t\ty: this.y },\n\t\t\t{ x: s.cols - 1,\n\t\t\t\ty: this.y }\n\t\t];\n\t\tthis._commands = clone(this.commands);\n\t}\n}\n","import { NorthLine, SouthLine, WestLine, EastLine } from './commands/lines'\nimport { StopLine, \n\tNorthLine as MNorthLine,\n\tSouthLine as MSouthLine,\n\tEastLine as MEastLine,\n\tWestLine as MWestLine } from './modifiers/lines'\n\nexport default {\n\t\"N\": NorthLine,\n\t\"n\": MNorthLine,\n\t\"S\": SouthLine,\n\t\"s\": MSouthLine,\n\t\"W\": WestLine,\n\t\"w\": MWestLine,\n\t\"E\": EastLine,\n\t\"e\": MEastLine,\n\t\"x\": StopLine,\n}\n","import s from '../settings';\nimport mappings from './mappings';\nimport Command from './commands/command'\nimport Modifier from './modifiers/modifier'\n\n// Controller for all of our Commander.\nexport default class Commander \n{\n\tpublic canvas: HTMLCanvasElement;\n\tpublic canvas_context: CanvasRenderingContext2D;\n\tpublic commands: Array<Command>;\n\tpublic modifiers: Array<Modifier>;\n\n\tconstructor (canvas: HTMLCanvasElement)\n\t{\n\t\tthis.canvas = canvas;\n\t\tthis.canvas_context = canvas.getContext('2d');\n\t\tthis.commands = Array<Command>(s.cols * s.rows);\n\t\tthis.modifiers = Array<Modifier>(s.cols * s.rows);\n\t}\n\n\twrite (glyph: string, x: number, y: number)\n\t{\n\t\tconst new_entity = new mappings[glyph](x, y) as Command | Modifier;\n\n\t\tif (new_entity instanceof Modifier)\n\t\t\t{\n\t\t\t\tthis.modifiers[this.index_at(x, y)] = new_entity;\n\t\t\t\tthis.commands[this.index_at(x, y)] = undefined;\n\t\t\t}\n\t\telse if (new_entity instanceof Command)\n\t\t\t{\n\t\t\t\tthis.commands[this.index_at(x, y)] = new_entity;\n\t\t\t\tthis.modifiers[this.index_at(x, y)] = undefined;\n\t\t\t}\n\n\t\tthis.refresh();\n\t}\n\n\terase (x: number, y: number)\n\t{\n\t\tthis.commands[this.index_at(x, y)] = undefined;\n\t\tthis.modifiers[this.index_at(x, y)] = undefined;\n\t}\n\n\tdraw ()\n\t{\n\t\tthis.canvas_context.clearRect(0, 0, s.canvas_width, s.canvas_height);\n\t\tfor (let command of this.commands) \n\t\t\t{\n\t\t\t\tif (command) command.draw(this.canvas_context);\t\n\t\t\t}\n\t\tfor (let modifier of this.modifiers)\n\t\t\t{\n\t\t\t\tif (modifier) modifier.draw(this.canvas_context);\n\t\t\t}\n\t}\n\n\trefresh ()\n\t{\n\t\tfor (let command of this.commands)\n\t\t\t{\n\t\t\t\tif (command instanceof Command) command.refresh(this.modifiers);\n\t\t\t}\n\t}\n\n\t// Helpers\n\n\tat (x: number, y: number): Command | void\n\t{\n\t\treturn this.commands.find(op => op.x == x && op.y == y);\n\t}\n\n\tindex_at (x: number, y: number): number\n\t{\n\t\treturn y * s.cols + x;\n\t}\n}\n","import s from './settings'\nimport { unsafe, grid_x_to_x, grid_y_to_y } from './utils'\n\ntype CursorEventName = \n\t'move_left' | 'move_right' | 'move_down' | 'move_up' |\n\t'N' | 'S' | 'E' | 'W' |\n\t'n' | 's' | 'e' | 'w' |\n\t'Backspace' |\n\t'x' ; \ntype CursorEventFunction =\n\t(cursor_x: number, cursor_y: number) => void;\n\nexport default class Cursor\n{\n\tpublic glyph: string;\n\tpublic x: number;\n\tpublic y: number;\n\tpublic events: any;\n\tprivate canvas: HTMLCanvasElement;\n\tprivate canvas_context: CanvasRenderingContext2D;\n\n\tconstructor(canvas: HTMLCanvasElement, x: number = 0, y: number = 0)\n\t{\n\t\tthis.canvas = canvas;\n\t\tthis.canvas_context = canvas.getContext('2d');\n\t\tthis.glyph = \"@\";\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\tconst default_fn = (_x: number, _y: number) => {};\n\n\t\t// ADD NEW EVENT NAMES HERE, MAKE SURE TO ADD THEM TO THE SWITCH CASE AS WELL!:\n\t\tconst event_names = [\n\t\t\t'move_left',\n\t\t\t'move_right',\n\t\t\t'move_up',\n\t\t\t'move_down',\n\t\t\t'Backspace',\n\t\t\t'N', 'S', 'E', 'W',\n\t\t\t'n', 's', 'e', 'w',\n\t\t\t'x'];\n\t\t\n\t\t// Register event_names as object { event_name: default_fn }\n\t\tthis.events = event_names.reduce((prev, curr, _i) =>{\n\t\t\tprev[curr] = default_fn;\n\t\t\treturn prev;\n\t\t}, {});\n\n\t\twindow.addEventListener(\"keydown\", this.event_handler(this));\n\t}\n\n\ton(event: CursorEventName, assoc_fun: CursorEventFunction)\n\t{\n\t\tif (event in this.events)\n\t\t\t{\n\t\t\t\tthis.events[event] = assoc_fun;\n\t\t\t} else {\n\t\t\t\tthrow new EvalError(`Event ${event} does not exist in cursor`);\n\t\t\t}\n\t}\n\n\tprivate event_handler(binding: Cursor) \n\t{\n\t\treturn function (e: KeyboardEvent) \n\t\t{\n\t\t\tconst key = e.key;\n\n\t\t\tswitch (key) {\n\t\t\t\tcase 'h': \n\t\t\t\t\tbinding.move_left();\n\t\t\t\t\tbinding.events['move_left'](binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'l':\n\t\t\t\t\tbinding.move_right();\n\t\t\t\t\tbinding.events['move_right'](binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'j':\n\t\t\t\t\tbinding.move_down();\n\t\t\t\t\tbinding.events['move_down'](binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'k':\n\t\t\t\t\tbinding.move_up();\n\t\t\t\t\tbinding.events['move_up'](binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'N':\n\t\t\t\t\tbinding.events['N'](binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'n':\n\t\t\t\t\tbinding.events['n'](binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'S':\n\t\t\t\t\tbinding.events['S'](binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 's':\n\t\t\t\t\tbinding.events['s'](binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'E':\n\t\t\t\t\tbinding.events['E'](binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'e':\n\t\t\t\t\tbinding.events['e'](binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'W':\n\t\t\t\t\tbinding.events['W'](binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'w':\n\t\t\t\t\tbinding.events['w'](binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'x':\n\t\t\t\t\tbinding.events['x'](binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Backspace':\n\t\t\t\t\tbinding.events['Backspace'](binding.x, binding.y);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmove_up()\n\t{\n\t\tthis.x = this.x;\n\t\tthis.y = unsafe(this.x, this.y - 1) ? this.y : this.y - 1;\n\t}\n\n\tmove_down()\n\t{\n\t\tthis.x = this.x;\n\t\tthis.y = unsafe(this.x, this.y + 1) ? this.y : this.y + 1;\n\t}\n\n\tmove_left()\n\t{\n\t\tthis.x = unsafe(this.x - 1, this.y) ? this.x : this.x - 1;\n\t\tthis.y = this.y;\n\t}\n\n\tmove_right()\n\t{\n\t\tthis.x = unsafe(this.x + 1, this.y) ? this.x : this.x + 1;\n\t\tthis.y = this.y;\n\t}\n\n\tpublic draw()\n\t{\n\t\tthis.canvas_context.clearRect(0, 0, s.canvas_width, s.canvas_height);\n\t\tthis.canvas_context.fillStyle = s.highlight_bg_color;\n\t\tthis.canvas_context.fillRect(grid_x_to_x(this.x),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.cell_size)\n\t\tthis.canvas_context.fillStyle = s.highlight_fg_color;\n\t\tthis.canvas_context.fillText(this.glyph,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_x_to_x(this.x, true),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid_y_to_y(this.y, true));\n\t}\n}\n","import settings from './settings'\nimport RefGrid from './reference-grid'\nimport Commander from './commander/commander'\nimport Cursor from './cursor'\n\nconst grid_canvas = document.getElementById('grid-canvas') as HTMLCanvasElement;\nconst commander_canvas = document.getElementById('commander-canvas') as HTMLCanvasElement;\nconst cursor_canvas = document.getElementById('cursor-canvas') as HTMLCanvasElement;\n\nexport default class Ripl\n{\n\tpublic commander: Commander;\n\tpublic grid: RefGrid; public cursor: Cursor;\n\n\tconstructor ()\n\t{\n\t\tsettings.install([grid_canvas, commander_canvas, cursor_canvas]);\n\n\t\tthis.grid = new RefGrid(grid_canvas);\n\t\tthis.commander = new Commander(commander_canvas);\n\t\tthis.cursor = new Cursor(cursor_canvas);\n\t\t\n\t\t// Cursor / keyboard listeners\n\t\tthis.cursor.on('N', (x: number, y: number) => this.commander.write(\"N\", x, y));\n\t\tthis.cursor.on('n', (x: number, y: number) => this.commander.write(\"n\", x, y));\n\t\tthis.cursor.on('S', (x: number, y: number) => this.commander.write(\"S\", x, y));\n\t\tthis.cursor.on('s', (x: number, y: number) => this.commander.write(\"s\", x, y));\n\t\tthis.cursor.on('E', (x: number, y: number) => this.commander.write(\"E\", x, y));\n\t\tthis.cursor.on('e', (x: number, y: number) => this.commander.write(\"e\", x, y));\n\t\tthis.cursor.on('W', (x: number, y: number) => this.commander.write(\"W\", x, y));\n\t\tthis.cursor.on('w', (x: number, y: number) => this.commander.write(\"w\", x, y));\n\t\tthis.cursor.on('Backspace', (x: number, y: number) => {\n\t\t\tthis.commander.erase(x, y); this.commander.refresh(); \n\t\t});\n\t\tthis.cursor.on('x', (x: number, y: number) => this.commander.write(\"x\", x, y));\n\t}\n\n\tdraw ()\n\t{\n\t\tthis.grid.draw();\n\t\tthis.commander.draw();\n\t\tthis.cursor.draw();\n\t}\n}\n","import Ripl from './ripl'\n\nconst ripl = new Ripl();\n\nfunction draw(): void\n{\n\tripl.draw();\n\twindow.requestAnimationFrame(draw);\n}\n\ndraw();\n"]}